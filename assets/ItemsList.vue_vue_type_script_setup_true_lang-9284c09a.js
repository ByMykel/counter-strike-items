import{o as c,e as d,h as m,l as F,r as h,m as V,p as O,q as Z,s as ee,v as E,w as te,x as se,y as oe,z as le,d as D,f as I,a as L,j as ne,t as M,g as $,A as X,B as re,C as ae,n as G,D as ie,i as U,F as Y,c as P,E as ue}from"./index-005b5486.js";function ce(n,i){return c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z"})])}function de(n,i){return c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})])}function fe(n){var i;const t=E(n);return(i=t==null?void 0:t.$el)!=null?i:t}const J=te?window:void 0;function W(...n){let i,t,s,e;if(typeof n[0]=="string"||Array.isArray(n[0])?([t,s,e]=n,i=J):[i,t,s,e]=n,!i)return F;Array.isArray(t)||(t=[t]),Array.isArray(s)||(s=[s]);const u=[],o=()=>{u.forEach(f=>f()),u.length=0},g=(f,b,_,w)=>(f.addEventListener(b,_,w),()=>f.removeEventListener(b,_,w)),r=se(()=>[fe(i),E(e)],([f,b])=>{o(),f&&u.push(...t.flatMap(_=>s.map(w=>g(f,_,w,b))))},{immediate:!0,flush:"post"}),a=()=>{r(),o()};return oe(a),a}const K=1;function me(n,i={}){const{throttle:t=0,idle:s=200,onStop:e=F,onScroll:u=F,offset:o={left:0,right:0,top:0,bottom:0},eventListenerOptions:g={capture:!1,passive:!0},behavior:r="auto",window:a=J}=i,f=h(0),b=h(0),_=V({get(){return f.value},set(l){A(l,void 0)}}),w=V({get(){return b.value},set(l){A(void 0,l)}});function A(l,y){var C,T,S;if(!a)return;const B=E(n);B&&((S=B instanceof Document?a.document.body:B)==null||S.scrollTo({top:(C=E(y))!=null?C:w.value,left:(T=E(l))!=null?T:_.value,behavior:E(r)}))}const p=h(!1),v=O({left:!0,right:!1,top:!0,bottom:!1}),k=O({left:!1,right:!1,top:!1,bottom:!1}),q=l=>{p.value&&(p.value=!1,k.left=!1,k.right=!1,k.top=!1,k.bottom=!1,e(l))},Q=Z(q,t+s),z=l=>{if(!a)return;const y=l===a?l.document.documentElement:l===a.document?l.documentElement:l,{display:C,flexDirection:T}=getComputedStyle(y),S=y.scrollLeft;k.left=S<f.value,k.right=S>f.value;const B=Math.abs(S)<=0+(o.left||0),R=Math.abs(S)+y.clientWidth>=y.scrollWidth-(o.right||0)-K;C==="flex"&&T==="row-reverse"?(v.left=R,v.right=B):(v.left=B,v.right=R),f.value=S;let x=y.scrollTop;l===a.document&&!x&&(x=a.document.body.scrollTop),k.top=x<b.value,k.bottom=x>b.value;const j=Math.abs(x)<=0+(o.top||0),N=Math.abs(x)+y.clientHeight>=y.scrollHeight-(o.bottom||0)-K;C==="flex"&&T==="column-reverse"?(v.top=N,v.bottom=j):(v.top=j,v.bottom=N),b.value=x},H=l=>{if(!a)return;const y=l.target===a.document?l.target.documentElement:l.target;z(y),p.value=!0,Q(l),u(l)};return W(n,"scroll",t?ee(H,t,!0,!1):H,g),W(n,"scrollend",q,g),{x:_,y:w,isScrolling:p,arrivedState:v,directions:k,measure(){const l=E(n);a&&l&&z(l)}}}const He=({query:n})=>i=>le(`list/${i}`,()=>{const t=h(!1),s=h(""),e=h(1),u=h([]),o=h([]),g=h(0),r=h([]),a=h({});async function f(){A(),t.value=!0,e.value=1;try{const{items:p,filters:v}=await n({search:s.value,filters:a.value});u.value=p,g.value=u.value.length,o.value=u.value.slice((e.value-1)*20,e.value*20),r.value=v??[]}catch(p){console.error(p instanceof Error?p.message:"An unknown error occurred")}finally{t.value=!1}}async function b(){e.value+=1,o.value.push(...u.value.slice((e.value-1)*20,e.value*20))}function _(p){A(),s.value=p,f()}function w({prop:p,value:v}){v.length===0?delete a.value[p]:a.value[p]=v}function A(){o.value=[],u.value=[],g.value=0}return{items:o,itemsCount:g,search:s,loading:t,filters:r,filtersValues:a,fetch:f,loadMore:b,setSearch:_,setFilters:w}}),pe={class:"relative"},ve={class:"absolute left-0 flex items-center h-full px-2"},he={class:"absolute right-0 flex items-center h-full gap-2 px-3"},ge={key:0,class:"px-2 text-sm text-white rounded-md bg-black-200"},be={class:"font-semibold"},ye={key:1,class:"w-20 h-6 px-2 rounded-md bg-black-200 animate-pulse"},_e={key:2,class:"w-0.5 h-[calc(100%-20px)] rounded-full bg-black-200/20"},we=D({__name:"SearchBar",props:{query:{},total:{},scrolledDown:{type:Boolean},hasFilters:{type:Boolean}},emits:["input","open-filters"],setup(n){const t=h(n.query||"");return(s,e)=>(c(),d("div",{class:G(["sticky top-0 left-0 right-0 z-50 px-5 pt-3 pb-2 duration-300",[s.scrolledDown?"bg-black-300 shadow-lg":"bg-transparent"]])},[m("div",pe,[m("div",ve,[I(L(de),{class:"w-6 h-6 text-black-200"})]),m("div",he,[s.total?(c(),d("p",ge,[ne(" total "),m("span",be,M(s.total),1)])):(c(),d("div",ye)),s.hasFilters?(c(),d("div",_e)):$("",!0),s.hasFilters?(c(),d("button",{key:3,type:"button",class:"p-1 rounded-md hover:bg-black-200",onClick:e[0]||(e[0]=u=>s.$emit("open-filters"))},[I(L(ce),{class:"w-6 h-6 text-black-100"})])):$("",!0)]),X(m("input",{"onUpdate:modelValue":e[1]||(e[1]=u=>t.value=u),class:"w-full h-full py-4 pl-12 text-white border-0 rounded-md outline-none bg-black-300 focus:outline-none sm:text-sm focus:ring-2 focus:ring-[#ff5e65] focus:border-transparent",type:"text",placeholder:"Search...",onKeyup:e[2]||(e[2]=ae(u=>s.$emit("input",t.value),["enter"]))},null,544),[[re,t.value]])])],2))}}),ke={class:"flex flex-col"},$e={key:0,class:"absolute z-10 flex gap-1 text-sm font-semibold text-white top-2 left-2"},Se={class:"absolute z-10 flex gap-1 text-sm font-semibold text-white top-2 right-2"},xe={key:0,class:"bg-[#ffd700] h-3 w-3 rounded-full",title:"Souvenir"},Ee={key:1,class:"bg-[#cf6a32] h-3 w-3 rounded-full",title:"StatTrak"},Be={key:2,class:"bg-[#8650ac] h-3 w-3 rounded-full",title:"Rare"},Ae={key:3,class:"bg-[#4d7455] h-3 w-3 rounded-full",title:"Rare"},Ce=["src","alt"],Te=["title"],Le=D({__name:"ItemCard",props:{id:{},name:{},image:{},souvenir:{type:Boolean},stattrak:{type:Boolean},rare:{type:Boolean},genuine:{type:Boolean}},emits:["show"],setup(n){const i=n,{getPrice:t}=ie(),s=V(()=>{const e=t(i.name);return(e==null?void 0:e.steam.last_7d)||(e==null?void 0:e.steam.last_24h)||(e==null?void 0:e.steam.last_30d)||(e==null?void 0:e.steam.last_90d)||null});return(e,u)=>(c(),d("div",ke,[m("button",{type:"button",class:"relative block h-[12rem] p-1 overflow-hidden border-2 border-transparent rounded-md outline-none cursor-pointer focus:border-[#ff5e65] hover:border-[#ff5e65]",onClick:u[0]||(u[0]=o=>e.$emit("show"))},[s.value?(c(),d("div",$e," $ "+M(s.value),1)):$("",!0),m("div",Se,[e.souvenir?(c(),d("div",xe)):$("",!0),e.stattrak?(c(),d("div",Ee)):$("",!0),e.rare?(c(),d("div",Be)):$("",!0),e.genuine?(c(),d("div",Ae)):$("",!0)]),m("img",{class:G(["object-contain w-full h-full py-4 rounded-md bg-black-300/80 bg-[url('/img/graph-paper.svg')]",{"pb-0":e.id.includes("agent-")}]),src:e.image,alt:e.name},null,10,Ce)]),m("div",null,[m("p",{class:"text-sm truncate px-0.5 mt-1.5 text-white",title:e.name},M(e.name),9,Te)])]))}}),De=m("div",{class:"block rounded-md animate-pulse h-5/6 bg-black-300"},null,-1),Fe=m("div",{class:"bg-black-300 rounded-md h-1/6 mt-1.5 animate-pulse"},null,-1),Ve=[De,Fe],Ie=D({__name:"ItemsSkeleton",props:{numberItems:{default:30}},setup(n){return(i,t)=>(c(!0),d(Y,null,U(i.numberItems,s=>(c(),d("div",{key:`skeleton-${s}`,class:"flex flex-col min-h-[10rem]"},Ve))),128))}}),Me={class:"relative flex-1 w-full"},qe={key:1,class:"py-10"},Re=D({__name:"ItemsList",props:{items:{},itemsCount:{},loading:{type:Boolean},search:{},hasFilters:{type:Boolean,default:!1}},emits:["set-query","select","load-more","open-filters"],setup(n,{emit:i}){const t=h(null),{y:s}=me(t),e=h(!1);function u(o){e.value=o,o===!0&&i("load-more")}return(o,g)=>(c(),d("div",Me,[I(we,{query:o.search,"scrolled-down":L(s)>40,total:o.itemsCount,"has-filters":o.hasFilters,onInput:g[0]||(g[0]=r=>o.$emit("set-query",r)),onOpenFilters:g[1]||(g[1]=r=>o.$emit("open-filters"))},null,8,["query","scrolled-down","total","has-filters"]),m("div",{ref_key:"el",ref:t,class:"grid w-full gap-3 p-4 px-5 pb-32 mx-auto overflow-y-scroll h-dvh items-grid-small md:items-grid"},[(c(!0),d(Y,null,U(o.items,r=>{var a;return c(),P(Le,{id:r.id,key:r.id,name:r.name,image:r.image,souvenir:r.name.includes("Souvenir"),stattrak:r.name.includes("StatTrakâ„¢"),rare:["sfui_invpanel_filter_melee","sfui_invpanel_filter_gloves"].includes((a=r==null?void 0:r.category)==null?void 0:a.id),genuine:r.name.includes("Genuine"),onShow:f=>o.$emit("select",r.id)},null,8,["id","name","image","souvenir","stattrak","rare","genuine","onShow"])}),128)),o.loading?(c(),P(Ie,{key:0})):$("",!0),o.loading?$("",!0):X((c(),d("div",qe,null,512)),[[L(ue),u]])],512)]))}});export{Re as _,He as c};
