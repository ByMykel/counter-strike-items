import{o as c,e as m,f as p,n as C,r as v,g as I,h as W,i as Z,j as ee,t as $,k as te,w as se,l as oe,m as le,d as A,p as X,a as L,q as ne,s as V,v as G,x as ae,y as q,z as re,A as ie,B as x,C as U,F as Y,c as j,D as ue}from"./index-6661349e.js";function ce(n,r){return c(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})])}function de(n){var r;const t=$(n);return(r=t==null?void 0:t.$el)!=null?r:t}const J=te?window:void 0;function O(...n){let r,t,s,e;if(typeof n[0]=="string"||Array.isArray(n[0])?([t,s,e]=n,r=J):[r,t,s,e]=n,!r)return C;Array.isArray(t)||(t=[t]),Array.isArray(s)||(s=[s]);const i=[],o=()=>{i.forEach(f=>f()),i.length=0},h=(f,d,w,k)=>(f.addEventListener(d,w,k),()=>f.removeEventListener(d,w,k)),a=se(()=>[de(r),$(e)],([f,d])=>{o(),f&&i.push(...t.flatMap(w=>s.map(k=>h(f,w,k,d))))},{immediate:!0,flush:"post"}),u=()=>{a(),o()};return oe(u),u}const K=1;function fe(n,r={}){const{throttle:t=0,idle:s=200,onStop:e=C,onScroll:i=C,offset:o={left:0,right:0,top:0,bottom:0},eventListenerOptions:h={capture:!1,passive:!0},behavior:a="auto",window:u=J}=r,f=v(0),d=v(0),w=I({get(){return f.value},set(l){M(l,void 0)}}),k=I({get(){return d.value},set(l){M(void 0,l)}});function M(l,g){var T,B,y;if(!u)return;const E=$(n);E&&((y=E instanceof Document?u.document.body:E)==null||y.scrollTo({top:(T=$(g))!=null?T:k.value,left:(B=$(l))!=null?B:w.value,behavior:$(a)}))}const D=v(!1),b=W({left:!0,right:!1,top:!0,bottom:!1}),_=W({left:!1,right:!1,top:!1,bottom:!1}),z=l=>{D.value&&(D.value=!1,_.left=!1,_.right=!1,_.top=!1,_.bottom=!1,e(l))},Q=Z(z,t+s),H=l=>{if(!u)return;const g=l===u?l.document.documentElement:l===u.document?l.documentElement:l,{display:T,flexDirection:B}=getComputedStyle(g),y=g.scrollLeft;_.left=y<f.value,_.right=y>f.value;const E=Math.abs(y)<=0+(o.left||0),F=Math.abs(y)+g.clientWidth>=g.scrollWidth-(o.right||0)-K;T==="flex"&&B==="row-reverse"?(b.left=F,b.right=E):(b.left=E,b.right=F),f.value=y;let S=g.scrollTop;l===u.document&&!S&&(S=u.document.body.scrollTop),_.top=S<d.value,_.bottom=S>d.value;const N=Math.abs(S)<=0+(o.top||0),P=Math.abs(S)+g.clientHeight>=g.scrollHeight-(o.bottom||0)-K;T==="flex"&&B==="column-reverse"?(b.top=P,b.bottom=N):(b.top=N,b.bottom=P),d.value=S},R=l=>{if(!u)return;const g=l.target===u.document?l.target.documentElement:l.target;H(g),D.value=!0,Q(l),i(l)};return O(n,"scroll",t?ee(R,t,!0,!1):R,h),O(n,"scrollend",z,h),{x:w,y:k,isScrolling:D,arrivedState:b,directions:_,measure(){const l=$(n);u&&l&&H(l)}}}const ze=({query:n})=>r=>le(`list/${r}`,()=>{const t=v(!1),s=v(""),e=v(1),i=v([]),o=v([]),h=v(0);async function a(){t.value=!0,e.value=1;try{const{items:d}=await n(s.value);i.value=d,h.value=i.value.length,o.value=i.value.slice((e.value-1)*20,e.value*20)}catch(d){console.error(d instanceof Error?d.message:"An unknown error occurred")}finally{t.value=!1}}async function u(){e.value+=1,o.value.push(...i.value.slice((e.value-1)*20,e.value*20))}function f(d){o.value=[],i.value=[],h.value=0,s.value=d,a()}return{items:o,itemsCount:h,search:s,loading:t,fetch:a,loadMore:u,setSearch:f}}),me={class:"relative"},pe={class:"absolute left-0 flex items-center h-full px-2"},ve={class:"absolute right-0 flex items-center h-full px-3"},he={key:0,class:"px-2 text-sm text-white rounded-md bg-black-200"},ge={class:"font-semibold"},be={key:1,class:"w-20 h-6 px-2 rounded-md bg-black-200 animate-pulse"},_e=A({__name:"SearchBar",props:{query:{},total:{},scrolledDown:{type:Boolean}},emits:["input"],setup(n){const t=v(n.query||"");return(s,e)=>(c(),m("div",{class:q(["sticky top-0 left-0 right-0 z-50 px-5 pt-3 pb-2 duration-300",[s.scrolledDown?"bg-black-300 shadow-lg":"bg-transparent"]])},[p("div",me,[p("div",pe,[X(L(ce),{class:"w-6 h-6 text-black-200"})]),p("div",ve,[s.total?(c(),m("p",he,[ne(" total "),p("span",ge,V(s.total),1)])):(c(),m("div",be))]),G(p("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>t.value=i),class:q(["w-full h-full py-4 pl-12 text-white rounded-md bg-black-300 focus:outline-none sm:text-sm",{"focus:ring-2 focus:ring-[#ff5e65] focus:border-[#ff5e65]":!s.scrolledDown}]),type:"text",placeholder:"Search...",onKeyup:e[1]||(e[1]=re(i=>s.$emit("input",t.value),["enter"]))},null,34),[[ae,t.value]])])],2))}}),ye={class:"flex flex-col"},we={key:0,class:"absolute z-10 flex gap-1 text-sm font-semibold text-white top-2 left-2"},ke={class:"absolute z-10 flex gap-1 text-sm font-semibold text-white top-2 right-2"},Se={key:0,class:"bg-[#ffd700] h-3 w-3 rounded-full",title:"Souvenir"},$e={key:1,class:"bg-[#cf6a32] h-3 w-3 rounded-full",title:"StatTrak"},xe={key:2,class:"bg-[#8650ac] h-3 w-3 rounded-full",title:"Rare"},Ee={key:3,class:"bg-[#4d7455] h-3 w-3 rounded-full",title:"Rare"},Te=["src","alt"],Be=["title"],De=A({__name:"ItemCard",props:{id:{},name:{},image:{},souvenir:{type:Boolean},stattrak:{type:Boolean},rare:{type:Boolean},genuine:{type:Boolean}},emits:["show"],setup(n){const r=n,{getPrice:t}=ie(),s=I(()=>{const e=t(r.name);return(e==null?void 0:e.steam.last_7d)||(e==null?void 0:e.steam.last_24h)||(e==null?void 0:e.steam.last_30d)||(e==null?void 0:e.steam.last_90d)||null});return(e,i)=>(c(),m("div",ye,[p("button",{type:"button",class:"relative block h-[12rem] p-1 overflow-hidden border-2 border-transparent rounded-md outline-none cursor-pointer focus:border-[#ff5e65] hover:border-[#ff5e65]",onClick:i[0]||(i[0]=o=>e.$emit("show"))},[s.value?(c(),m("div",we," $ "+V(s.value),1)):x("",!0),p("div",ke,[e.souvenir?(c(),m("div",Se)):x("",!0),e.stattrak?(c(),m("div",$e)):x("",!0),e.rare?(c(),m("div",xe)):x("",!0),e.genuine?(c(),m("div",Ee)):x("",!0)]),p("img",{class:q(["object-contain w-full h-full py-4 rounded-md bg-black-300/80 bg-[url('/img/graph-paper.svg')]",{"pb-0":e.id.includes("agent-")}]),src:e.image,alt:e.name},null,10,Te)]),p("div",null,[p("p",{class:"text-sm truncate px-0.5 mt-1.5 text-white",title:e.name},V(e.name),9,Be)])]))}}),Ae=p("div",{class:"block rounded-md animate-pulse h-5/6 bg-black-300"},null,-1),Ce=p("div",{class:"bg-black-300 rounded-md h-1/6 mt-1.5 animate-pulse"},null,-1),Ie=[Ae,Ce],Le=A({__name:"ItemsSkeleton",props:{numberItems:{default:30}},setup(n){return(r,t)=>(c(!0),m(Y,null,U(r.numberItems,s=>(c(),m("div",{key:`skeleton-${s}`,class:"flex flex-col min-h-[10rem]"},Ie))),128))}}),Ve={class:"relative flex-1 w-full"},qe={key:1,class:"py-10"},He=A({__name:"ItemsList",props:{items:{},itemsCount:{},loading:{type:Boolean},search:{}},emits:["set-query","select","load-more"],setup(n,{emit:r}){const t=v(null),{y:s}=fe(t),e=v(!1);function i(o){e.value=o,o===!0&&r("load-more")}return(o,h)=>(c(),m("div",Ve,[X(_e,{query:o.search,"scrolled-down":L(s)>40,total:o.itemsCount,onInput:h[0]||(h[0]=a=>o.$emit("set-query",a))},null,8,["query","scrolled-down","total"]),p("div",{ref_key:"el",ref:t,class:"grid w-full gap-3 p-4 px-5 pb-32 mx-auto overflow-y-scroll h-dvh items-grid-small md:items-grid"},[(c(!0),m(Y,null,U(o.items,a=>{var u;return c(),j(De,{id:a.id,key:a.id,name:a.name,image:a.image,souvenir:a.name.includes("Souvenir"),stattrak:a.name.includes("StatTrakâ„¢"),rare:["sfui_invpanel_filter_melee","sfui_invpanel_filter_gloves"].includes((u=a==null?void 0:a.category)==null?void 0:u.id),genuine:a.name.includes("Genuine"),onShow:f=>o.$emit("select",a.id)},null,8,["id","name","image","souvenir","stattrak","rare","genuine","onShow"])}),128)),o.loading?(c(),j(Le,{key:0})):x("",!0),o.loading?x("",!0):G((c(),m("div",qe,null,512)),[[L(ue),i]])],512)]))}});export{He as _,ze as c};
