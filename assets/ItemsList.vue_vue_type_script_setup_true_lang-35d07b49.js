import{o as i,e as c,j as v,p as M,r as m,q as K,s as z,v as oe,w as ne,x as le,y as E,z as re,A as Z,B as ae,C as ie,D as ue,E as ce,G as de,I as fe,J as pe,K as ve,d as I,h as O,a as C,l as me,t as R,i as S,L as J,M as he,N as ge,n as Q,O as be,k as Y,F as ee,c as G,P as ye}from"./index-0567b634.js";function we(a,l){return i(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"})])}function ke(a,l){return i(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])}function te(a){var l;const e=E(a);return(l=e==null?void 0:e.$el)!=null?l:e}const se=re?window:void 0;function U(...a){let l,e,o,u;if(typeof a[0]=="string"||Array.isArray(a[0])?([e,o,u]=a,l=se):[l,e,o,u]=a,!l)return M;Array.isArray(e)||(e=[e]),Array.isArray(o)||(o=[o]);const d=[],f=()=>{d.forEach(g=>g()),d.length=0},r=(g,p,b,_)=>(g.addEventListener(p,b,_),()=>g.removeEventListener(p,b,_)),h=Z(()=>[te(l),E(u)],([g,p])=>{if(f(),!g)return;const b=ae(p)?{...p}:p;d.push(...e.flatMap(_=>o.map(x=>r(g,_,x,b))))},{immediate:!0,flush:"post"}),t=()=>{h(),f()};return ie(t),t}const X=1;function _e(a,l={}){const{throttle:e=0,idle:o=200,onStop:u=M,onScroll:d=M,offset:f={left:0,right:0,top:0,bottom:0},eventListenerOptions:r={capture:!1,passive:!0},behavior:h="auto",window:t=se,onError:g=s=>{console.error(s)}}=l,p=m(0),b=m(0),_=K({get(){return p.value},set(s){D(s,void 0)}}),x=K({get(){return b.value},set(s){D(void 0,s)}});function D(s,B){var y,L,T;if(!t)return;const $=E(a);$&&((T=$ instanceof Document?t.document.body:$)==null||T.scrollTo({top:(y=E(B))!=null?y:x.value,left:(L=E(s))!=null?L:_.value,behavior:E(h)}))}const q=m(!1),w=z({left:!0,right:!1,top:!0,bottom:!1}),n=z({left:!1,right:!1,top:!1,bottom:!1}),k=s=>{q.value&&(q.value=!1,n.left=!1,n.right=!1,n.top=!1,n.bottom=!1,u(s))},F=oe(k,e+o),V=s=>{var B;if(!t)return;const y=((B=s==null?void 0:s.document)==null?void 0:B.documentElement)||(s==null?void 0:s.documentElement)||te(s),{display:L,flexDirection:T}=getComputedStyle(y),$=y.scrollLeft;n.left=$<p.value,n.right=$>p.value;const j=Math.abs($)<=(f.left||0),H=Math.abs($)+y.clientWidth>=y.scrollWidth-(f.right||0)-X;L==="flex"&&T==="row-reverse"?(w.left=H,w.right=j):(w.left=j,w.right=H),p.value=$;let A=y.scrollTop;s===t.document&&!A&&(A=t.document.body.scrollTop),n.top=A<b.value,n.bottom=A>b.value;const N=Math.abs(A)<=(f.top||0),W=Math.abs(A)+y.clientHeight>=y.scrollHeight-(f.bottom||0)-X;L==="flex"&&T==="column-reverse"?(w.top=W,w.bottom=N):(w.top=N,w.bottom=W),b.value=A},P=s=>{var B;if(!t)return;const y=(B=s.target.documentElement)!=null?B:s.target;V(y),q.value=!0,F(s),d(s)};return U(a,"scroll",e?ne(P,e,!0,!1):P,r),le(()=>{try{const s=E(a);if(!s)return;V(s)}catch(s){g(s)}}),U(a,"scrollend",k,r),{x:_,y:x,isScrolling:q,arrivedState:w,directions:n,measure(){const s=E(a);t&&s&&V(s)}}}const Ue=({query:a})=>l=>ue(`list/${l}`,()=>{const e=ce(),o=de(),u=m(!1),d=m(""),f=m(1),r=m([]),h=m([]),t=m(0),g=m([]),p=m({});async function b(){q(),u.value=!0,f.value=1;try{const{items:n,filters:k}=await a({search:d.value,filters:p.value});r.value=n,t.value=r.value.length,h.value=r.value.slice((f.value-1)*20,f.value*20),g.value=k??[]}catch(n){console.error(n instanceof Error?n.message:"An unknown error occurred")}finally{u.value=!1}}async function _(){f.value+=1,h.value.push(...r.value.slice((f.value-1)*20,f.value*20))}function x(n){q(),d.value=n,b(),w(n)}function D({prop:n,value:k}){k.length===0?delete p.value[n]:p.value[n]=k}function q(){h.value=[],r.value=[],t.value=0}function w(n){o.push({query:n.length?{q:n}:{}})}return fe(()=>{const n=typeof e.query.q=="string"&&e.query.q?e.query.q:d.value;x(n)}),pe(()=>{var n,k;(k=(n=ve())==null?void 0:n._s)==null||k.forEach(F=>{F.$id===`list/${l}`&&F.$dispose()})}),{items:h,itemsCount:t,search:d,loading:u,filters:g,filtersValues:p,fetch:b,loadMore:_,setSearch:x,setFilters:D}}),$e={class:"relative"},Se={class:"absolute left-0 flex items-center h-full px-2"},Ee={class:"absolute right-0 flex items-center h-full gap-2 px-3"},xe={key:0,class:"px-2 text-sm text-white rounded-md bg-black-200"},qe={class:"font-semibold"},Be={key:1,class:"w-20 h-6 px-2 rounded-md bg-black-200 animate-pulse"},Ae={key:2,class:"w-0.5 h-[calc(100%-20px)] rounded-full bg-black-200/20"},Ce=I({__name:"SearchBar",props:{query:{},total:{},scrolledDown:{type:Boolean},hasFilters:{type:Boolean},loading:{type:Boolean}},emits:["input","open-filters"],setup(a){const l=a,e=m(l.query||"");return Z(()=>l.query,o=>{e.value=o}),(o,u)=>(i(),c("div",{class:Q(["sticky top-0 left-0 right-0 px-5 pt-3 pb-2 duration-300",[o.scrolledDown?"bg-black-300 shadow-lg":"bg-transparent"]])},[v("div",$e,[v("div",Se,[O(C(ke),{class:"w-6 h-6 text-black-200"})]),v("div",Ee,[o.loading?(i(),c("div",Be)):(i(),c("p",xe,[me(" total "),v("span",qe,R(o.total),1)])),o.hasFilters?(i(),c("div",Ae)):S("",!0),o.hasFilters?(i(),c("button",{key:3,type:"button",class:"p-1 rounded-md hover:bg-black-200",onClick:u[0]||(u[0]=d=>o.$emit("open-filters"))},[O(C(we),{class:"w-6 h-6 text-black-100"})])):S("",!0)]),J(v("input",{"onUpdate:modelValue":u[1]||(u[1]=d=>e.value=d),class:"w-full h-full py-4 pl-12 text-white border-0 rounded-md outline-none bg-black-300 focus:outline-none sm:text-sm focus:ring-2 focus:ring-[#ff5e65] focus:border-transparent",type:"text",placeholder:"Search...",onKeyup:u[2]||(u[2]=ge(d=>o.$emit("input",e.value),["enter"]))},null,544),[[he,e.value]])])],2))}}),Le={class:"flex flex-col"},Te=["src","alt"],De={key:0,class:"absolute flex gap-1 text-sm font-semibold text-white top-2 left-2"},Fe={class:"absolute flex gap-1 text-sm font-semibold text-white top-2 right-2"},Ie={key:0,class:"bg-[#ffd700] h-3 w-3 rounded-full",title:"Souvenir"},Ve={key:1,class:"bg-[#cf6a32] h-3 w-3 rounded-full",title:"StatTrak"},Me={key:2,class:"bg-[#8650ac] h-3 w-3 rounded-full",title:"Rare"},Oe={key:3,class:"bg-[#4d7455] h-3 w-3 rounded-full",title:"Rare"},Re=["title"],Pe=I({__name:"ItemCard",props:{id:{},name:{},image:{},souvenir:{type:Boolean},stattrak:{type:Boolean},rare:{type:Boolean},genuine:{type:Boolean}},emits:["show"],setup(a){const{getItemSteamPrice:l}=be();return(e,o)=>(i(),c("div",Le,[v("button",{type:"button",class:"relative block h-[12rem] p-1 overflow-hidden border-2 border-transparent rounded-md outline-none cursor-pointer focus:border-[#ff5e65] hover:border-[#ff5e65]",onClick:o[0]||(o[0]=u=>e.$emit("show"))},[v("img",{class:Q(["object-contain w-full pointer-events-none h-full py-4 rounded-md bg-black-300/80 bg-[url('/img/graph-paper.svg')]",{"pb-0":e.id.includes("agent-")}]),src:e.image,alt:e.name},null,10,Te),C(l)(e.name)?(i(),c("div",De," $ "+R(C(l)(e.name)),1)):S("",!0),v("div",Fe,[e.souvenir?(i(),c("div",Ie)):S("",!0),e.stattrak?(i(),c("div",Ve)):S("",!0),e.rare?(i(),c("div",Me)):S("",!0),e.genuine?(i(),c("div",Oe)):S("",!0)])]),v("div",null,[v("p",{class:"text-sm truncate px-0.5 mt-1.5 text-white",title:e.name},R(e.name),9,Re)])]))}}),je=v("div",{class:"block rounded-md animate-pulse h-5/6 bg-black-300"},null,-1),He=v("div",{class:"bg-black-300 rounded-md h-1/6 mt-1.5 animate-pulse"},null,-1),Ne=[je,He],We=I({__name:"ItemsSkeleton",props:{numberItems:{default:30}},setup(a){return(l,e)=>(i(!0),c(ee,null,Y(l.numberItems,o=>(i(),c("div",{key:`skeleton-${o}`,class:"flex flex-col min-h-[10rem]"},Ne))),128))}}),Ke={class:"relative flex-1 w-full"},ze={key:1,class:"py-10"},Xe=I({__name:"ItemsList",props:{items:{},itemsCount:{},loading:{type:Boolean},search:{},hasFilters:{type:Boolean,default:!1}},emits:["set-query","select","load-more","open-filters"],setup(a,{emit:l}){const e=l,o=m(null),{y:u}=_e(o),d=m(!1);function f(r){d.value=r,r===!0&&e("load-more")}return(r,h)=>(i(),c("div",Ke,[O(Ce,{query:r.search,"scrolled-down":C(u)>40,total:r.itemsCount,loading:r.loading,"has-filters":r.hasFilters,onInput:h[0]||(h[0]=t=>r.$emit("set-query",t)),onOpenFilters:h[1]||(h[1]=t=>r.$emit("open-filters"))},null,8,["query","scrolled-down","total","loading","has-filters"]),v("div",{ref_key:"el",ref:o,class:"grid w-full gap-3 p-4 px-5 pb-32 mx-auto overflow-y-scroll h-dvh items-grid-small md:items-grid"},[(i(!0),c(ee,null,Y(r.items,t=>(i(),G(Pe,{id:t.id,key:t.id,name:t.name,image:t.image,souvenir:(t==null?void 0:t.souvenir)??!1,stattrak:(t==null?void 0:t.stattrak)??!1,rare:(t==null?void 0:t.rare)??!1,genuine:t.name.includes("Genuine"),onShow:g=>r.$emit("select",t.id)},null,8,["id","name","image","souvenir","stattrak","rare","genuine","onShow"]))),128)),r.loading?(i(),G(We,{key:0})):S("",!0),r.loading?S("",!0):J((i(),c("div",ze,null,512)),[[C(ye),f]])],512)]))}});export{Xe as _,Ue as c};
