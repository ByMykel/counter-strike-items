import{o as i,e as d,j as m,p as V,r as g,q as z,s as O,v as ee,w as te,x as q,y as se,z as U,A as oe,B as ne,C as le,D as re,E as ae,G as ie,I as ue,d as I,h as M,a as C,l as ce,t as R,i as S,J as X,K as de,L as fe,n as J,M as pe,k as Q,F as Y,c as W,N as ve}from"./index-9b63c1b9.js";function me(a,n){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z"})])}function he(a,n){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})])}function ge(a){var n;const e=q(a);return(n=e==null?void 0:e.$el)!=null?n:e}const Z=se?window:void 0;function K(...a){let n,e,s,u;if(typeof a[0]=="string"||Array.isArray(a[0])?([e,s,u]=a,n=Z):[n,e,s,u]=a,!n)return V;Array.isArray(e)||(e=[e]),Array.isArray(s)||(s=[s]);const f=[],t=()=>{f.forEach(v=>v()),f.length=0},p=(v,h,k,_)=>(v.addEventListener(h,k,_),()=>v.removeEventListener(h,k,_)),o=U(()=>[ge(n),q(u)],([v,h])=>{t(),v&&f.push(...e.flatMap(k=>s.map(_=>p(v,k,_,h))))},{immediate:!0,flush:"post"}),c=()=>{o(),t()};return oe(c),c}const G=1;function be(a,n={}){const{throttle:e=0,idle:s=200,onStop:u=V,onScroll:f=V,offset:t={left:0,right:0,top:0,bottom:0},eventListenerOptions:p={capture:!1,passive:!0},behavior:o="auto",window:c=Z}=n,v=g(0),h=g(0),k=z({get(){return v.value},set(l){L(l,void 0)}}),_=z({get(){return h.value},set(l){L(void 0,l)}});function L(l,w){var D,F,E;if(!c)return;const A=q(a);A&&((E=A instanceof Document?c.document.body:A)==null||E.scrollTo({top:(D=q(w))!=null?D:_.value,left:(F=q(l))!=null?F:k.value,behavior:q(o)}))}const B=g(!1),b=O({left:!0,right:!1,top:!0,bottom:!1}),y=O({left:!1,right:!1,top:!1,bottom:!1}),r=l=>{B.value&&(B.value=!1,y.left=!1,y.right=!1,y.top=!1,y.bottom=!1,u(l))},$=ee(r,e+s),T=l=>{if(!c)return;const w=l===c?l.document.documentElement:l===c.document?l.documentElement:l,{display:D,flexDirection:F}=getComputedStyle(w),E=w.scrollLeft;y.left=E<v.value,y.right=E>v.value;const A=Math.abs(E)<=0+(t.left||0),N=Math.abs(E)+w.clientWidth>=w.scrollWidth-(t.right||0)-G;D==="flex"&&F==="row-reverse"?(b.left=N,b.right=A):(b.left=A,b.right=N),v.value=E;let x=w.scrollTop;l===c.document&&!x&&(x=c.document.body.scrollTop),y.top=x<h.value,y.bottom=x>h.value;const P=Math.abs(x)<=0+(t.top||0),j=Math.abs(x)+w.clientHeight>=w.scrollHeight-(t.bottom||0)-G;D==="flex"&&F==="column-reverse"?(b.top=j,b.bottom=P):(b.top=P,b.bottom=j),h.value=x},H=l=>{if(!c)return;const w=l.target===c.document?l.target.documentElement:l.target;T(w),B.value=!0,$(l),f(l)};return K(a,"scroll",e?te(H,e,!0,!1):H,p),K(a,"scrollend",r,p),{x:k,y:_,isScrolling:B,arrivedState:b,directions:y,measure(){const l=q(a);c&&l&&T(l)}}}const Oe=({query:a})=>n=>ne(`list/${n}`,()=>{const e=le(),s=re(),u=g(!1),f=g(""),t=g(1),p=g([]),o=g([]),c=g(0),v=g([]),h=g({});async function k(){b(),u.value=!0,t.value=1;try{const{items:r,filters:$}=await a({search:f.value,filters:h.value});p.value=r,c.value=p.value.length,o.value=p.value.slice((t.value-1)*20,t.value*20),v.value=$??[]}catch(r){console.error(r instanceof Error?r.message:"An unknown error occurred")}finally{u.value=!1}}async function _(){t.value+=1,o.value.push(...p.value.slice((t.value-1)*20,t.value*20))}function L(r){b(),f.value=r,k(),y(r)}function B({prop:r,value:$}){$.length===0?delete h.value[r]:h.value[r]=$}function b(){o.value=[],p.value=[],c.value=0}function y(r){s.push({query:r.length?{q:r}:{}})}return ae(()=>{const r=typeof e.query.q=="string"&&e.query.q?e.query.q:f.value;L(r)}),ie(()=>{var r,$;($=(r=ue())==null?void 0:r._s)==null||$.forEach(T=>{T.$id===`list/${n}`&&T.$dispose()})}),{items:o,itemsCount:c,search:f,loading:u,filters:v,filtersValues:h,fetch:k,loadMore:_,setSearch:L,setFilters:B}}),ye={class:"relative"},we={class:"absolute left-0 flex items-center h-full px-2"},ke={class:"absolute right-0 flex items-center h-full gap-2 px-3"},_e={key:0,class:"px-2 text-sm text-white rounded-md bg-black-200"},$e={class:"font-semibold"},Se={key:1,class:"w-20 h-6 px-2 rounded-md bg-black-200 animate-pulse"},Ee={key:2,class:"w-0.5 h-[calc(100%-20px)] rounded-full bg-black-200/20"},xe=I({__name:"SearchBar",props:{query:{},total:{},scrolledDown:{type:Boolean},hasFilters:{type:Boolean},loading:{type:Boolean}},emits:["input","open-filters"],setup(a){const n=a,e=g(n.query||"");return U(()=>n.query,s=>{e.value=s}),(s,u)=>(i(),d("div",{class:J(["sticky top-0 left-0 right-0 px-5 pt-3 pb-2 duration-300",[s.scrolledDown?"bg-black-300 shadow-lg":"bg-transparent"]])},[m("div",ye,[m("div",we,[M(C(he),{class:"w-6 h-6 text-black-200"})]),m("div",ke,[s.loading?(i(),d("div",Se)):(i(),d("p",_e,[ce(" total "),m("span",$e,R(s.total),1)])),s.hasFilters?(i(),d("div",Ee)):S("",!0),s.hasFilters?(i(),d("button",{key:3,type:"button",class:"p-1 rounded-md hover:bg-black-200",onClick:u[0]||(u[0]=f=>s.$emit("open-filters"))},[M(C(me),{class:"w-6 h-6 text-black-100"})])):S("",!0)]),X(m("input",{"onUpdate:modelValue":u[1]||(u[1]=f=>e.value=f),class:"w-full h-full py-4 pl-12 text-white border-0 rounded-md outline-none bg-black-300 focus:outline-none sm:text-sm focus:ring-2 focus:ring-[#ff5e65] focus:border-transparent",type:"text",placeholder:"Search...",onKeyup:u[2]||(u[2]=fe(f=>s.$emit("input",e.value),["enter"]))},null,544),[[de,e.value]])])],2))}}),qe={class:"flex flex-col"},Be=["src","alt"],Ae={key:0,class:"absolute flex gap-1 text-sm font-semibold text-white top-2 left-2"},Ce={class:"absolute flex gap-1 text-sm font-semibold text-white top-2 right-2"},Le={key:0,class:"bg-[#ffd700] h-3 w-3 rounded-full",title:"Souvenir"},Te={key:1,class:"bg-[#cf6a32] h-3 w-3 rounded-full",title:"StatTrak"},De={key:2,class:"bg-[#8650ac] h-3 w-3 rounded-full",title:"Rare"},Fe={key:3,class:"bg-[#4d7455] h-3 w-3 rounded-full",title:"Rare"},Ie=["title"],Ve=I({__name:"ItemCard",props:{id:{},name:{},image:{},souvenir:{type:Boolean},stattrak:{type:Boolean},rare:{type:Boolean},genuine:{type:Boolean}},emits:["show"],setup(a){const{getItemSteamPrice:n}=pe();return(e,s)=>(i(),d("div",qe,[m("button",{type:"button",class:"relative block h-[12rem] p-1 overflow-hidden border-2 border-transparent rounded-md outline-none cursor-pointer focus:border-[#ff5e65] hover:border-[#ff5e65]",onClick:s[0]||(s[0]=u=>e.$emit("show"))},[m("img",{class:J(["object-contain w-full pointer-events-none h-full py-4 rounded-md bg-black-300/80 bg-[url('/img/graph-paper.svg')]",{"pb-0":e.id.includes("agent-")}]),src:e.image,alt:e.name},null,10,Be),C(n)(e.name)?(i(),d("div",Ae," $ "+R(C(n)(e.name)),1)):S("",!0),m("div",Ce,[e.souvenir?(i(),d("div",Le)):S("",!0),e.stattrak?(i(),d("div",Te)):S("",!0),e.rare?(i(),d("div",De)):S("",!0),e.genuine?(i(),d("div",Fe)):S("",!0)])]),m("div",null,[m("p",{class:"text-sm truncate px-0.5 mt-1.5 text-white",title:e.name},R(e.name),9,Ie)])]))}}),Me=m("div",{class:"block rounded-md animate-pulse h-5/6 bg-black-300"},null,-1),Re=m("div",{class:"bg-black-300 rounded-md h-1/6 mt-1.5 animate-pulse"},null,-1),He=[Me,Re],Ne=I({__name:"ItemsSkeleton",props:{numberItems:{default:30}},setup(a){return(n,e)=>(i(!0),d(Y,null,Q(n.numberItems,s=>(i(),d("div",{key:`skeleton-${s}`,class:"flex flex-col min-h-[10rem]"},He))),128))}}),Pe={class:"relative flex-1 w-full"},je={key:1,class:"py-10"},We=I({__name:"ItemsList",props:{items:{},itemsCount:{},loading:{type:Boolean},search:{},hasFilters:{type:Boolean,default:!1}},emits:["set-query","select","load-more","open-filters"],setup(a,{emit:n}){const e=g(null),{y:s}=be(e),u=g(!1);function f(t){u.value=t,t===!0&&n("load-more")}return(t,p)=>(i(),d("div",Pe,[M(xe,{query:t.search,"scrolled-down":C(s)>40,total:t.itemsCount,loading:t.loading,"has-filters":t.hasFilters,onInput:p[0]||(p[0]=o=>t.$emit("set-query",o)),onOpenFilters:p[1]||(p[1]=o=>t.$emit("open-filters"))},null,8,["query","scrolled-down","total","loading","has-filters"]),m("div",{ref_key:"el",ref:e,class:"grid w-full gap-3 p-4 px-5 pb-32 mx-auto overflow-y-scroll h-dvh items-grid-small md:items-grid"},[(i(!0),d(Y,null,Q(t.items,o=>(i(),W(Ve,{id:o.id,key:o.id,name:o.name,image:o.image,souvenir:(o==null?void 0:o.souvenir)??!1,stattrak:(o==null?void 0:o.stattrak)??!1,rare:(o==null?void 0:o.rare)??!1,genuine:o.name.includes("Genuine"),onShow:c=>t.$emit("select",o.id)},null,8,["id","name","image","souvenir","stattrak","rare","genuine","onShow"]))),128)),t.loading?(i(),W(Ne,{key:0})):S("",!0),t.loading?S("",!0):X((i(),d("div",je,null,512)),[[C(ve),f]])],512)]))}});export{We as _,Oe as c};
