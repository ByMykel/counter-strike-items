import{o as d,e as v,f as m,n as L,r as f,g as T,h as N,i as ee,j as te,t as x,k as se,w as oe,l as le,m as X,a as ne,d as I,p as Y,b as B,q as re,s as C,v as G,x as ae,y as V,z as P,A as J,F as K,c as O,B as ie}from"./index-d1b3c56c.js";function ce(l,o){return d(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})])}function ue(l){var o;const t=x(l);return(o=t==null?void 0:t.$el)!=null?o:t}const Q=se?window:void 0;function W(...l){let o,t,s,e;if(typeof l[0]=="string"||Array.isArray(l[0])?([t,s,e]=l,o=Q):[o,t,s,e]=l,!o)return L;Array.isArray(t)||(t=[t]),Array.isArray(s)||(s=[s]);const c=[],r=()=>{c.forEach(a=>a()),c.length=0},h=(a,b,w,k)=>(a.addEventListener(b,w,k),()=>a.removeEventListener(b,w,k)),u=oe(()=>[ue(o),x(e)],([a,b])=>{r(),a&&c.push(...t.flatMap(w=>s.map(k=>h(a,w,k,b))))},{immediate:!0,flush:"post"}),i=()=>{u(),r()};return le(i),i}const U=1;function de(l,o={}){const{throttle:t=0,idle:s=200,onStop:e=L,onScroll:c=L,offset:r={left:0,right:0,top:0,bottom:0},eventListenerOptions:h={capture:!1,passive:!0},behavior:u="auto",window:i=Q}=o,a=f(0),b=f(0),w=T({get(){return a.value},set(n){q(n,void 0)}}),k=T({get(){return b.value},set(n){q(void 0,n)}});function q(n,p){var E,A,y;if(!i)return;const $=x(l);$&&((y=$ instanceof Document?i.document.body:$)==null||y.scrollTo({top:(E=x(p))!=null?E:k.value,left:(A=x(n))!=null?A:w.value,behavior:x(u)}))}const D=f(!1),g=N({left:!0,right:!1,top:!0,bottom:!1}),_=N({left:!1,right:!1,top:!1,bottom:!1}),M=n=>{D.value&&(D.value=!1,_.left=!1,_.right=!1,_.top=!1,_.bottom=!1,e(n))},Z=ee(M,t+s),z=n=>{if(!i)return;const p=n===i?n.document.documentElement:n===i.document?n.documentElement:n,{display:E,flexDirection:A}=getComputedStyle(p),y=p.scrollLeft;_.left=y<a.value,_.right=y>a.value;const $=Math.abs(y)<=0+(r.left||0),R=Math.abs(y)+p.clientWidth>=p.scrollWidth-(r.right||0)-U;E==="flex"&&A==="row-reverse"?(g.left=R,g.right=$):(g.left=$,g.right=R),a.value=y;let S=p.scrollTop;n===i.document&&!S&&(S=i.document.body.scrollTop),_.top=S<b.value,_.bottom=S>b.value;const j=Math.abs(S)<=0+(r.top||0),F=Math.abs(S)+p.clientHeight>=p.scrollHeight-(r.bottom||0)-U;E==="flex"&&A==="column-reverse"?(g.top=F,g.bottom=j):(g.top=j,g.bottom=F),b.value=S},H=n=>{if(!i)return;const p=n.target===i.document?n.target.documentElement:n.target;z(p),D.value=!0,Z(n),c(n)};return W(l,"scroll",t?te(H,t,!0,!1):H,h),W(l,"scrollend",M,h),{x:w,y:k,isScrolling:D,arrivedState:g,directions:_,measure(){const n=x(l);i&&n&&z(n)}}}const qe=({query:l})=>o=>X(`list/${o}`,()=>{const t=f(!1),s=f(""),e=f(1),c=f([]),r=f([]);async function h(){t.value=!0,e.value=1;try{const{items:a}=await l(s.value);c.value=a,r.value=c.value.slice((e.value-1)*20,e.value*20)}catch(a){console.error(a instanceof Error?a.message:"An unknown error occurred")}finally{t.value=!1}}async function u(){e.value+=1,r.value.push(...c.value.slice((e.value-1)*20,e.value*20))}function i(a){s.value=a,h()}return{items:r,search:s,loading:t,fetch:h,loadMore:u,setSearch:i}}),me="https://corsproxy.io/?",fe=me+"https://prices.csgotrader.app/latest/prices_v6.json";class pe{async fetchPrices(){return(await ne.get(fe)).data}}const ve=X("prices",()=>{const l=new pe,o=f({});async function t(){try{o.value=await l.fetchPrices()}catch{console.error("Unable to load prices")}}function s(e){return o.value[e]}return{prices:o,fetchPrices:t,getPrice:s}}),he={class:"relative"},be={class:"absolute left-0 flex items-center h-full px-2"},ge={class:"absolute right-0 flex items-center h-full px-3"},_e={key:0,class:"px-2 text-sm text-white rounded-md bg-black-200"},ye={class:"font-semibold"},we={key:1,class:"w-20 h-6 px-2 rounded-md bg-black-200 animate-pulse"},ke=I({__name:"SearchBar",props:{query:{},total:{},scrolledDown:{type:Boolean}},emits:["input"],setup(l){const t=f(l.query||"");return(s,e)=>(d(),v("div",{class:V(["sticky top-0 left-0 right-0 z-50 px-5 pt-3 pb-2 duration-300",[s.scrolledDown?"bg-black-300 shadow-lg":"bg-transparent"]])},[m("div",he,[m("div",be,[Y(B(ce),{class:"w-6 h-6 text-black-200"})]),m("div",ge,[s.total?(d(),v("p",_e,[re(" total "),m("span",ye,C(s.total),1)])):(d(),v("div",we))]),G(m("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>t.value=c),class:V(["w-full h-full py-4 pl-12 text-white rounded-md bg-black-300 focus:outline-none sm:text-sm",{"focus:ring-2 focus:ring-blue-500 focus:border-blue-500":!s.scrolledDown}]),type:"text",placeholder:"Search...",onInput:e[1]||(e[1]=c=>s.$emit("input",t.value))},null,34),[[ae,t.value]])])],2))}}),Se={class:"flex flex-col"},xe={class:"relative block h-[12rem] p-1 overflow-hidden border-2 border-transparent rounded-md outline-none cursor-pointer focus:border-blue-500 hover:border-blue-500"},$e={key:0,class:"absolute z-10 flex gap-1 text-sm font-semibold text-white top-2 left-2"},Ee=["src","alt"],Ae=["title"],De=I({__name:"ItemCard",props:{id:{},name:{},image:{}},setup(l){const o=l,{getPrice:t}=ve(),s=T(()=>{const e=t(o.name);return(e==null?void 0:e.steam.last_7d)||(e==null?void 0:e.steam.last_24h)||(e==null?void 0:e.steam.last_30d)||(e==null?void 0:e.steam.last_90d)||null});return(e,c)=>(d(),v("div",Se,[m("div",xe,[s.value?(d(),v("div",$e," $ "+C(s.value),1)):P("",!0),m("img",{class:V(["object-contain w-full h-full py-4 rounded-md bg-black-300/80 bg-[url('/img/graph-paper.svg')]",{"pb-0":e.id.includes("agent-")}]),src:e.image,alt:e.name},null,10,Ee)]),m("div",null,[m("p",{class:"text-sm truncate px-0.5 mt-1.5 text-white",title:e.name},C(e.name),9,Ae)])]))}}),Ie=m("div",{class:"block relative rounded-md p-0.5 border-transparent animate-pulse overflow-hidden border-2 min-h-[10rem] bg-black-300 focus:border-blue-500 hover:border-blue-500 outline-none h-full cursor-pointer"},null,-1),Le=m("div",{class:"bg-black-300 rounded-md h-[1.7rem] mt-1.5 animate-pulse"},null,-1),Te=[Ie,Le],Be=I({__name:"ItemsSkeleton",props:{numberItems:{default:30}},setup(l){return(o,t)=>(d(!0),v(K,null,J(o.numberItems,s=>(d(),v("div",{key:`skeleton-${s}`,class:"flex flex-col"},Te))),128))}}),Ce={class:"relative flex-1 w-full"},Ve={key:1,class:"py-10"},Me=I({__name:"ItemsList",props:{items:{},itemsCount:{},loading:{type:Boolean},search:{}},emits:["set-query","select","load-more"],setup(l,{emit:o}){const t=f(null),{y:s}=de(t),e=f(!1);function c(r){e.value=r,r===!0&&o("load-more")}return(r,h)=>(d(),v("div",Ce,[Y(ke,{query:r.search,"scrolled-down":B(s)>40,total:r.itemsCount,onInput:h[0]||(h[0]=u=>r.$emit("set-query",u))},null,8,["query","scrolled-down","total"]),m("div",{ref_key:"el",ref:t,class:"grid w-full gap-3 p-4 px-5 pb-32 mx-auto overflow-y-scroll h-dvh items-grid-small md:items-grid"},[(d(!0),v(K,null,J(r.items,u=>(d(),O(De,{id:u.id,key:u.id,name:u.name,image:u.image,onClick:i=>r.$emit("select",u.id)},null,8,["id","name","image","onClick"]))),128)),r.loading?(d(),O(Be,{key:0})):P("",!0),r.loading?P("",!0):G((d(),v("div",Ve,null,512)),[[B(ie),c]])],512)]))}});export{Me as _,qe as c,ve as u};
