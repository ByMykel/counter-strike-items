import{o as u,e as m,f as p,n as D,r as v,g as I,h as W,i as Z,j as ee,t as $,k as te,w as oe,l as se,m as le,d as A,p as G,a as L,q as ne,s as V,v as U,x as re,y as q,z as ae,A as x,B as Y,F as J,c as j,C as ie}from"./index-778fcf48.js";function ue(n,a){return u(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})])}function ce(n){var a;const t=$(n);return(a=t==null?void 0:t.$el)!=null?a:t}const K=te?window:void 0;function O(...n){let a,t,o,e;if(typeof n[0]=="string"||Array.isArray(n[0])?([t,o,e]=n,a=K):[a,t,o,e]=n,!a)return D;Array.isArray(t)||(t=[t]),Array.isArray(o)||(o=[o]);const c=[],l=()=>{c.forEach(f=>f()),c.length=0},b=(f,d,k,w)=>(f.addEventListener(d,k,w),()=>f.removeEventListener(d,k,w)),r=oe(()=>[ce(a),$(e)],([f,d])=>{l(),f&&c.push(...t.flatMap(k=>o.map(w=>b(f,k,w,d))))},{immediate:!0,flush:"post"}),i=()=>{r(),l()};return se(i),i}const X=1;function de(n,a={}){const{throttle:t=0,idle:o=200,onStop:e=D,onScroll:c=D,offset:l={left:0,right:0,top:0,bottom:0},eventListenerOptions:b={capture:!1,passive:!0},behavior:r="auto",window:i=K}=a,f=v(0),d=v(0),k=I({get(){return f.value},set(s){M(s,void 0)}}),w=I({get(){return d.value},set(s){M(void 0,s)}});function M(s,h){var T,B,y;if(!i)return;const E=$(n);E&&((y=E instanceof Document?i.document.body:E)==null||y.scrollTo({top:(T=$(h))!=null?T:w.value,left:(B=$(s))!=null?B:k.value,behavior:$(r)}))}const C=v(!1),g=W({left:!0,right:!1,top:!0,bottom:!1}),_=W({left:!1,right:!1,top:!1,bottom:!1}),z=s=>{C.value&&(C.value=!1,_.left=!1,_.right=!1,_.top=!1,_.bottom=!1,e(s))},Q=Z(z,t+o),H=s=>{if(!i)return;const h=s===i?s.document.documentElement:s===i.document?s.documentElement:s,{display:T,flexDirection:B}=getComputedStyle(h),y=h.scrollLeft;_.left=y<f.value,_.right=y>f.value;const E=Math.abs(y)<=0+(l.left||0),F=Math.abs(y)+h.clientWidth>=h.scrollWidth-(l.right||0)-X;T==="flex"&&B==="row-reverse"?(g.left=F,g.right=E):(g.left=E,g.right=F),f.value=y;let S=h.scrollTop;s===i.document&&!S&&(S=i.document.body.scrollTop),_.top=S<d.value,_.bottom=S>d.value;const N=Math.abs(S)<=0+(l.top||0),P=Math.abs(S)+h.clientHeight>=h.scrollHeight-(l.bottom||0)-X;T==="flex"&&B==="column-reverse"?(g.top=P,g.bottom=N):(g.top=N,g.bottom=P),d.value=S},R=s=>{if(!i)return;const h=s.target===i.document?s.target.documentElement:s.target;H(h),C.value=!0,Q(s),c(s)};return O(n,"scroll",t?ee(R,t,!0,!1):R,b),O(n,"scrollend",z,b),{x:k,y:w,isScrolling:C,arrivedState:g,directions:_,measure(){const s=$(n);i&&s&&H(s)}}}const ze=({query:n})=>a=>le(`list/${a}`,()=>{const t=v(!1),o=v(""),e=v(1),c=v([]),l=v([]),b=v(0);async function r(){t.value=!0,e.value=1;try{const{items:d}=await n(o.value);c.value=d,b.value=c.value.length,l.value=c.value.slice((e.value-1)*20,e.value*20)}catch(d){console.error(d instanceof Error?d.message:"An unknown error occurred")}finally{t.value=!1}}async function i(){e.value+=1,l.value.push(...c.value.slice((e.value-1)*20,e.value*20))}function f(d){o.value=d,r()}return{items:l,itemsCount:b,search:o,loading:t,fetch:r,loadMore:i,setSearch:f}}),fe={class:"relative"},me={class:"absolute left-0 flex items-center h-full px-2"},pe={class:"absolute right-0 flex items-center h-full px-3"},ve={key:0,class:"px-2 text-sm text-white rounded-md bg-black-200"},he={class:"font-semibold"},be={key:1,class:"w-20 h-6 px-2 rounded-md bg-black-200 animate-pulse"},ge=A({__name:"SearchBar",props:{query:{},total:{},scrolledDown:{type:Boolean}},emits:["input"],setup(n){const t=v(n.query||"");return(o,e)=>(u(),m("div",{class:q(["sticky top-0 left-0 right-0 z-50 px-5 pt-3 pb-2 duration-300",[o.scrolledDown?"bg-black-300 shadow-lg":"bg-transparent"]])},[p("div",fe,[p("div",me,[G(L(ue),{class:"w-6 h-6 text-black-200"})]),p("div",pe,[o.total?(u(),m("p",ve,[ne(" total "),p("span",he,V(o.total),1)])):(u(),m("div",be))]),U(p("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>t.value=c),class:q(["w-full h-full py-4 pl-12 text-white rounded-md bg-black-300 focus:outline-none sm:text-sm",{"focus:ring-2 focus:ring-blue-500 focus:border-blue-500":!o.scrolledDown}]),type:"text",placeholder:"Search...",onInput:e[1]||(e[1]=c=>o.$emit("input",t.value))},null,34),[[re,t.value]])])],2))}}),_e={class:"flex flex-col"},ye={class:"relative block h-[12rem] p-1 overflow-hidden border-2 border-transparent rounded-md outline-none cursor-pointer focus:border-blue-500 hover:border-blue-500"},ke={key:0,class:"absolute z-10 flex gap-1 text-sm font-semibold text-white top-2 left-2"},we={class:"absolute z-10 flex gap-1 text-sm font-semibold text-white top-2 right-2"},Se={key:0,class:"bg-[#ffd700] h-3 w-3 rounded-full",title:"Souvenir"},$e={key:1,class:"bg-[#cf6a32] h-3 w-3 rounded-full",title:"StatTrak"},xe={key:2,class:"bg-[#8650ac] h-3 w-3 rounded-full",title:"Rare"},Ee={key:3,class:"bg-[#4d7455] h-3 w-3 rounded-full",title:"Rare"},Te=["src","alt"],Be=["title"],Ce=A({__name:"ItemCard",props:{id:{},name:{},image:{},souvenir:{type:Boolean},stattrak:{type:Boolean},rare:{type:Boolean},genuine:{type:Boolean}},setup(n){const a=n,{getPrice:t}=ae(),o=I(()=>{const e=t(a.name);return(e==null?void 0:e.steam.last_7d)||(e==null?void 0:e.steam.last_24h)||(e==null?void 0:e.steam.last_30d)||(e==null?void 0:e.steam.last_90d)||null});return(e,c)=>(u(),m("div",_e,[p("div",ye,[o.value?(u(),m("div",ke," $ "+V(o.value),1)):x("",!0),p("div",we,[e.souvenir?(u(),m("div",Se)):x("",!0),e.stattrak?(u(),m("div",$e)):x("",!0),e.rare?(u(),m("div",xe)):x("",!0),e.genuine?(u(),m("div",Ee)):x("",!0)]),p("img",{class:q(["object-contain w-full h-full py-4 rounded-md bg-black-300/80 bg-[url('/img/graph-paper.svg')]",{"pb-0":e.id.includes("agent-")}]),src:e.image,alt:e.name},null,10,Te)]),p("div",null,[p("p",{class:"text-sm truncate px-0.5 mt-1.5 text-white",title:e.name},V(e.name),9,Be)])]))}}),Ae=p("div",{class:"block relative rounded-md p-0.5 border-transparent animate-pulse overflow-hidden border-2 min-h-[10rem] bg-black-300 focus:border-blue-500 hover:border-blue-500 outline-none h-full cursor-pointer"},null,-1),De=p("div",{class:"bg-black-300 rounded-md h-[1.7rem] mt-1.5 animate-pulse"},null,-1),Ie=[Ae,De],Le=A({__name:"ItemsSkeleton",props:{numberItems:{default:30}},setup(n){return(a,t)=>(u(!0),m(J,null,Y(a.numberItems,o=>(u(),m("div",{key:`skeleton-${o}`,class:"flex flex-col"},Ie))),128))}}),Ve={class:"relative flex-1 w-full"},qe={key:1,class:"py-10"},He=A({__name:"ItemsList",props:{items:{},itemsCount:{},loading:{type:Boolean},search:{}},emits:["set-query","select","load-more"],setup(n,{emit:a}){const t=v(null),{y:o}=de(t),e=v(!1);function c(l){e.value=l,l===!0&&a("load-more")}return(l,b)=>(u(),m("div",Ve,[G(ge,{query:l.search,"scrolled-down":L(o)>40,total:l.itemsCount,onInput:b[0]||(b[0]=r=>l.$emit("set-query",r))},null,8,["query","scrolled-down","total"]),p("div",{ref_key:"el",ref:t,class:"grid w-full gap-3 p-4 px-5 pb-32 mx-auto overflow-y-scroll h-dvh items-grid-small md:items-grid"},[(u(!0),m(J,null,Y(l.items,r=>{var i;return u(),j(Ce,{id:r.id,key:r.id,name:r.name,image:r.image,souvenir:r.name.includes("Souvenir"),stattrak:r.name.includes("StatTrakâ„¢"),rare:["sfui_invpanel_filter_melee","sfui_invpanel_filter_gloves"].includes((i=r==null?void 0:r.category)==null?void 0:i.id),genuine:r.name.includes("Genuine"),onClick:f=>l.$emit("select",r.id)},null,8,["id","name","image","souvenir","stattrak","rare","genuine","onClick"])}),128)),l.loading?(u(),j(Le,{key:0})):x("",!0),l.loading?x("",!0):U((u(),m("div",qe,null,512)),[[L(ie),c]])],512)]))}});export{He as _,ze as c};
