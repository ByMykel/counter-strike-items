import{c as S,u as k,_ as h}from"./useTitle-CSSLKpLY.js";import{g as w,b as y,e as l,t,f as F,d as P,u as N,r as V,h as x,i as C,c as I,j as $,a as i,o as d}from"./index-Dslffg3F.js";import{_ as b}from"./FiltersPanel.vue_vue_type_script_setup_true_lang-DLsNukg3.js";class L{async query({search:c,filters:e}){const a=w();let f=await y.get(`https://raw.githubusercontent.com/ByMykel/CSGO-API/main/public/api/${a}/skins.json`).then(p=>p.data.reduce((n,o)=>(n[o.id]=o,n),{})),s=await y.get(`https://raw.githubusercontent.com/ByMykel/CSGO-API/main/public/api/${a}/skins_not_grouped.json`).then(p=>p.data.map(n=>{var o,r;return{...n,rare:["sfui_invpanel_filter_melee","sfui_invpanel_filter_gloves"].includes(n.category.id),collections:((o=f[n.skin_id])==null?void 0:o.collections)??[],crates:((r=f[n.skin_id])==null?void 0:r.crates)??[]}}));const u=[{prop:"crates",name:t("filter_crates"),type:"multi-select",options:l(s,{type:"fromNestedProperty",property:"crates"})},{prop:"collections",name:t("filter_collections"),type:"multi-select",options:l(s,{type:"fromNestedProperty",property:"collections"})},{prop:"rarity",name:t("filter_rarity"),type:"multi-select",options:l(s,{type:"fromNestedSingleProperty",property:"rarity"})},{prop:"pattern",name:t("filter_pattern"),type:"multi-select",options:l(s,{type:"fromNestedSingleProperty",property:"pattern"})},{prop:"style",name:t("filter_finish_style"),type:"multi-select",options:l(s,{type:"fromNestedSingleProperty",property:"style"})},{prop:"weapon",name:t("filter_weapon"),type:"multi-select",options:l(s,{type:"fromNestedSingleProperty",property:"weapon"})},{prop:"wear",name:t("filter_wear"),type:"multi-select",options:l(s,{type:"fromNestedSingleProperty",property:"wear"})},{prop:"category",name:t("filter_category"),type:"multi-select",options:l(s,{type:"fromNestedSingleProperty",property:"category"})},{prop:"paint_index",name:t("filter_paint_index"),type:"multi-select",options:l(s,{type:"fromProperty",property:"paint_index"})},{prop:"souvenir",name:t("filter_souvenir"),type:"multi-select",options:[{id:"true",name:t("common_yes")},{id:"false",name:t("common_no")}]},{prop:"stattrak",name:t("filter_stattrak"),type:"multi-select",options:[{id:"true",name:t("common_yes")},{id:"false",name:t("common_no")}]},{prop:"team",name:t("filter_team"),type:"multi-select",options:l(s,{type:"fromNestedSingleProperty",property:"team"})},{prop:"legacy_model",name:t("filter_legacy_model"),type:"multi-select",options:[{id:"true",name:t("common_yes")},{id:"false",name:t("common_no")}]}];return{items:F(s,c,e),filters:u}}}const B={class:"flex flex-row flex-1"},q=P({__name:"SkinsView",setup(_){const c=N(),e=S({query:new L().query})("skins")(),a=V(!1);function f(){c.deleteItem(),a.value=!0}function s(o){a.value=!1,c.getItemDetails(o)}function u({prop:o,value:r}){e.setFilters({prop:o,value:r}),e.fetch()}function p(){e.removeFilters(),e.fetch()}function n({prop:o,value:r}){const g=(e.filtersValues[o]??[]).filter(v=>v!==r);e.setFilters({prop:o,value:g}),e.fetch()}return k("Skins - Counter-Strike items"),(o,r)=>(d(),x("div",B,[C(h,{items:i(e).items,"items-count":i(e).itemsCount,loading:i(e).loading,search:i(e).search,"has-filters":i(e).filters.length>0,"has-selected-filters":Object.keys(i(e).filtersValues).length>0,filters:i(e).filters,"filters-values":i(e).filtersValues,onSetQuery:r[0]||(r[0]=m=>i(e).setSearch(m)),onSelect:s,onLoadMore:r[1]||(r[1]=m=>i(e).loadMore()),onOpenFilters:r[2]||(r[2]=m=>f()),onRemoveFilter:n},null,8,["items","items-count","loading","search","has-filters","has-selected-filters","filters","filters-values"]),a.value?(d(),I(b,{key:0,filters:i(e).filters,"filters-values":i(e).filtersValues,onSetFilters:u,onRemoveFilters:p,onClose:r[3]||(r[3]=m=>a.value=!1)},null,8,["filters","filters-values"])):$("",!0)]))}});export{q as default};
