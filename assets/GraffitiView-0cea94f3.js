import{c as y,_ as g}from"./ItemsList.vue_vue_type_script_setup_true_lang-6f22f495.js";import{b as v,d as S,u as h,r as C,e as I,f as _,a,c as k,g as w,o as m}from"./index-5bb58463.js";import{u as d,_ as F}from"./FiltersPanel.vue_vue_type_script_setup_true_lang-a70dbbb0.js";class b{async query({search:o,filters:e}){let i=await v.get("https://bymykel.github.io/CSGO-API/api/en/graffiti.json").then(t=>t.data);const l=[{prop:"rarity",name:"Rarity",type:"multi-select",options:d(i.map(t=>({id:t.rarity.id,name:t.rarity.name})),"id")},{prop:"crates",name:"Crate",type:"multi-select",options:d(i.flatMap(t=>(t==null?void 0:t.crates)??[]),"id")}];return(o||Object.keys(e).length>0)&&(i=i.filter(t=>{const f=t.name.toLowerCase().includes(o.toLowerCase()),n=Object.keys(e).every(s=>{const r=t[s]??[],u=e[s];return Array.isArray(r)?r.map(c=>c.id).some(c=>u.includes(c)):typeof r=="string"||typeof r=="boolean"?u.includes(r.toString()):u.includes(r.id)});return f&&n})),{items:i,filters:l}}}const x={class:"flex flex-row flex-1"},O=S({__name:"GraffitiView",setup(p){const o=h(),e=y({query:new b().query})("graffiti")(),i=C(!1);function l(){o.deleteItem(),i.value=!0}function t(n){i.value=!1,o.getItemDetails(n)}function f({prop:n,value:s}){e.setFilters({prop:n,value:s}),e.fetch()}return e.fetch(),(n,s)=>(m(),I("div",x,[_(g,{items:a(e).items,"items-count":a(e).itemsCount,loading:a(e).loading,search:a(e).search,"has-filters":a(e).filters.length>0,onSetQuery:s[0]||(s[0]=r=>a(e).setSearch(r)),onSelect:t,onLoadMore:s[1]||(s[1]=r=>a(e).loadMore()),onOpenFilters:s[2]||(s[2]=r=>l())},null,8,["items","items-count","loading","search","has-filters"]),i.value?(m(),k(F,{key:0,filters:a(e).filters,"filters-values":a(e).filtersValues,onSetFilters:f,onClose:s[3]||(s[3]=r=>i.value=!1)},null,8,["filters","filters-values"])):w("",!0)]))}});export{O as default};
