import{o as i,e as d,h as m,l as V,r as g,m as N,p as O,q as ee,s as te,v as q,w as se,x as U,y as oe,z as ne,A as le,B as re,C as ae,D as ie,E as ue,d as I,f as M,a as C,j as ce,t as z,g as S,G as X,I as de,J as fe,n as J,K as pe,i as Q,F as Y,c as W,L as ve}from"./index-e8dbe1f1.js";function me(a,n){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z"})])}function he(a,n){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})])}function ge(a){var n;const e=q(a);return(n=e==null?void 0:e.$el)!=null?n:e}const Z=se?window:void 0;function K(...a){let n,e,t,u;if(typeof a[0]=="string"||Array.isArray(a[0])?([e,t,u]=a,n=Z):[n,e,t,u]=a,!n)return V;Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);const f=[],s=()=>{f.forEach(v=>v()),f.length=0},p=(v,h,k,_)=>(v.addEventListener(h,k,_),()=>v.removeEventListener(h,k,_)),o=U(()=>[ge(n),q(u)],([v,h])=>{s(),v&&f.push(...e.flatMap(k=>t.map(_=>p(v,k,_,h))))},{immediate:!0,flush:"post"}),c=()=>{o(),s()};return oe(c),c}const G=1;function be(a,n={}){const{throttle:e=0,idle:t=200,onStop:u=V,onScroll:f=V,offset:s={left:0,right:0,top:0,bottom:0},eventListenerOptions:p={capture:!1,passive:!0},behavior:o="auto",window:c=Z}=n,v=g(0),h=g(0),k=N({get(){return v.value},set(l){L(l,void 0)}}),_=N({get(){return h.value},set(l){L(void 0,l)}});function L(l,w){var D,F,x;if(!c)return;const A=q(a);A&&((x=A instanceof Document?c.document.body:A)==null||x.scrollTo({top:(D=q(w))!=null?D:_.value,left:(F=q(l))!=null?F:k.value,behavior:q(o)}))}const B=g(!1),b=O({left:!0,right:!1,top:!0,bottom:!1}),y=O({left:!1,right:!1,top:!1,bottom:!1}),r=l=>{B.value&&(B.value=!1,y.left=!1,y.right=!1,y.top=!1,y.bottom=!1,u(l))},$=ee(r,e+t),T=l=>{if(!c)return;const w=l===c?l.document.documentElement:l===c.document?l.documentElement:l,{display:D,flexDirection:F}=getComputedStyle(w),x=w.scrollLeft;y.left=x<v.value,y.right=x>v.value;const A=Math.abs(x)<=0+(s.left||0),H=Math.abs(x)+w.clientWidth>=w.scrollWidth-(s.right||0)-G;D==="flex"&&F==="row-reverse"?(b.left=H,b.right=A):(b.left=A,b.right=H),v.value=x;let E=w.scrollTop;l===c.document&&!E&&(E=c.document.body.scrollTop),y.top=E<h.value,y.bottom=E>h.value;const P=Math.abs(E)<=0+(s.top||0),j=Math.abs(E)+w.clientHeight>=w.scrollHeight-(s.bottom||0)-G;D==="flex"&&F==="column-reverse"?(b.top=j,b.bottom=P):(b.top=P,b.bottom=j),h.value=E},R=l=>{if(!c)return;const w=l.target===c.document?l.target.documentElement:l.target;T(w),B.value=!0,$(l),f(l)};return K(a,"scroll",e?te(R,e,!0,!1):R,p),K(a,"scrollend",r,p),{x:k,y:_,isScrolling:B,arrivedState:b,directions:y,measure(){const l=q(a);c&&l&&T(l)}}}const Oe=({query:a})=>n=>ne(`list/${n}`,()=>{const e=le(),t=re(),u=g(!1),f=g(""),s=g(1),p=g([]),o=g([]),c=g(0),v=g([]),h=g({});async function k(){b(),u.value=!0,s.value=1;try{const{items:r,filters:$}=await a({search:f.value,filters:h.value});p.value=r,c.value=p.value.length,o.value=p.value.slice((s.value-1)*20,s.value*20),v.value=$??[]}catch(r){console.error(r instanceof Error?r.message:"An unknown error occurred")}finally{u.value=!1}}async function _(){s.value+=1,o.value.push(...p.value.slice((s.value-1)*20,s.value*20))}function L(r){b(),f.value=r,k(),y(r)}function B({prop:r,value:$}){$.length===0?delete h.value[r]:h.value[r]=$}function b(){o.value=[],p.value=[],c.value=0}function y(r){t.push({query:r.length?{q:r}:{}})}return ae(()=>{const r=typeof e.query.q=="string"&&e.query.q?e.query.q:f.value;L(r)}),ie(()=>{var r,$;($=(r=ue())==null?void 0:r._s)==null||$.forEach(T=>{T.$id===`list/${n}`&&T.$dispose()})}),{items:o,itemsCount:c,search:f,loading:u,filters:v,filtersValues:h,fetch:k,loadMore:_,setSearch:L,setFilters:B}}),ye={class:"relative"},we={class:"absolute left-0 flex items-center h-full px-2"},ke={class:"absolute right-0 flex items-center h-full gap-2 px-3"},_e={key:0,class:"px-2 text-sm text-white rounded-md bg-black-200"},$e={class:"font-semibold"},Se={key:1,class:"w-20 h-6 px-2 rounded-md bg-black-200 animate-pulse"},xe={key:2,class:"w-0.5 h-[calc(100%-20px)] rounded-full bg-black-200/20"},Ee=I({__name:"SearchBar",props:{query:{},total:{},scrolledDown:{type:Boolean},hasFilters:{type:Boolean}},emits:["input","open-filters"],setup(a){const n=a,e=g(n.query||"");return U(()=>n.query,t=>{e.value=t}),(t,u)=>(i(),d("div",{class:J(["sticky top-0 left-0 right-0 z-50 px-5 pt-3 pb-2 duration-300",[t.scrolledDown?"bg-black-300 shadow-lg":"bg-transparent"]])},[m("div",ye,[m("div",we,[M(C(he),{class:"w-6 h-6 text-black-200"})]),m("div",ke,[t.total?(i(),d("p",_e,[ce(" total "),m("span",$e,z(t.total),1)])):(i(),d("div",Se)),t.hasFilters?(i(),d("div",xe)):S("",!0),t.hasFilters?(i(),d("button",{key:3,type:"button",class:"p-1 rounded-md hover:bg-black-200",onClick:u[0]||(u[0]=f=>t.$emit("open-filters"))},[M(C(me),{class:"w-6 h-6 text-black-100"})])):S("",!0)]),X(m("input",{"onUpdate:modelValue":u[1]||(u[1]=f=>e.value=f),class:"w-full h-full py-4 pl-12 text-white border-0 rounded-md outline-none bg-black-300 focus:outline-none sm:text-sm focus:ring-2 focus:ring-[#ff5e65] focus:border-transparent",type:"text",placeholder:"Search...",onKeyup:u[2]||(u[2]=fe(f=>t.$emit("input",e.value),["enter"]))},null,544),[[de,e.value]])])],2))}}),qe={class:"flex flex-col"},Be={key:0,class:"absolute z-10 flex gap-1 text-sm font-semibold text-white top-2 left-2"},Ae={class:"absolute z-10 flex gap-1 text-sm font-semibold text-white top-2 right-2"},Ce={key:0,class:"bg-[#ffd700] h-3 w-3 rounded-full",title:"Souvenir"},Le={key:1,class:"bg-[#cf6a32] h-3 w-3 rounded-full",title:"StatTrak"},Te={key:2,class:"bg-[#8650ac] h-3 w-3 rounded-full",title:"Rare"},De={key:3,class:"bg-[#4d7455] h-3 w-3 rounded-full",title:"Rare"},Fe=["src","alt"],Ie=["title"],Ve=I({__name:"ItemCard",props:{id:{},name:{},image:{},souvenir:{type:Boolean},stattrak:{type:Boolean},rare:{type:Boolean},genuine:{type:Boolean}},emits:["show"],setup(a){const{getItemSteamPrice:n}=pe();return(e,t)=>(i(),d("div",qe,[m("button",{type:"button",class:"relative block h-[12rem] p-1 overflow-hidden border-2 border-transparent rounded-md outline-none cursor-pointer focus:border-[#ff5e65] hover:border-[#ff5e65]",onClick:t[0]||(t[0]=u=>e.$emit("show"))},[C(n)(e.name)?(i(),d("div",Be," $ "+z(C(n)(e.name)),1)):S("",!0),m("div",Ae,[e.souvenir?(i(),d("div",Ce)):S("",!0),e.stattrak?(i(),d("div",Le)):S("",!0),e.rare?(i(),d("div",Te)):S("",!0),e.genuine?(i(),d("div",De)):S("",!0)]),m("img",{class:J(["object-contain w-full h-full py-4 rounded-md bg-black-300/80 bg-[url('/img/graph-paper.svg')]",{"pb-0":e.id.includes("agent-")}]),src:e.image,alt:e.name},null,10,Fe)]),m("div",null,[m("p",{class:"text-sm truncate px-0.5 mt-1.5 text-white",title:e.name},z(e.name),9,Ie)])]))}}),Me=m("div",{class:"block rounded-md animate-pulse h-5/6 bg-black-300"},null,-1),ze=m("div",{class:"bg-black-300 rounded-md h-1/6 mt-1.5 animate-pulse"},null,-1),Re=[Me,ze],He=I({__name:"ItemsSkeleton",props:{numberItems:{default:30}},setup(a){return(n,e)=>(i(!0),d(Y,null,Q(n.numberItems,t=>(i(),d("div",{key:`skeleton-${t}`,class:"flex flex-col min-h-[10rem]"},Re))),128))}}),Pe={class:"relative flex-1 w-full"},je={key:1,class:"py-10"},We=I({__name:"ItemsList",props:{items:{},itemsCount:{},loading:{type:Boolean},search:{},hasFilters:{type:Boolean,default:!1}},emits:["set-query","select","load-more","open-filters"],setup(a,{emit:n}){const e=g(null),{y:t}=be(e),u=g(!1);function f(s){u.value=s,s===!0&&n("load-more")}return(s,p)=>(i(),d("div",Pe,[M(Ee,{query:s.search,"scrolled-down":C(t)>40,total:s.itemsCount,"has-filters":s.hasFilters,onInput:p[0]||(p[0]=o=>s.$emit("set-query",o)),onOpenFilters:p[1]||(p[1]=o=>s.$emit("open-filters"))},null,8,["query","scrolled-down","total","has-filters"]),m("div",{ref_key:"el",ref:e,class:"grid w-full gap-3 p-4 px-5 pb-32 mx-auto overflow-y-scroll h-dvh items-grid-small md:items-grid"},[(i(!0),d(Y,null,Q(s.items,o=>(i(),W(Ve,{id:o.id,key:o.id,name:o.name,image:o.image,souvenir:(o==null?void 0:o.souvenir)??!1,stattrak:(o==null?void 0:o.stattrak)??!1,rare:(o==null?void 0:o.rare)??!1,genuine:o.name.includes("Genuine"),onShow:c=>s.$emit("select",o.id)},null,8,["id","name","image","souvenir","stattrak","rare","genuine","onShow"]))),128)),s.loading?(i(),W(He,{key:0})):S("",!0),s.loading?S("",!0):X((i(),d("div",je,null,512)),[[C(ve),f]])],512)]))}});export{We as _,Oe as c};
