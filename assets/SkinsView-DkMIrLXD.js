import{c as v,u as S,_ as k}from"./useTitle-BolsepId.js";import{g as h,b as w,t,e as i,f as F,d as V,u as x,r as N,h as P,i as C,a as s,c as I,j as L,o as c}from"./index-BYuWOvtL.js";import{_ as $}from"./FiltersPanel.vue_vue_type_script_setup_true_lang-Dgg8gX4-.js";class b{async query({search:p,filters:e}){const n=h();let o=await w.get(`https://raw.githubusercontent.com/ByMykel/CSGO-API/main/public/api/${n}/skins_not_grouped.json`).then(u=>u.data.map(m=>({...m,rare:["sfui_invpanel_filter_melee","sfui_invpanel_filter_gloves"].includes(m.category.id)})));const f=[{prop:"rarity",name:t("filter_rarity"),type:"multi-select",options:i(o,{type:"fromNestedSingleProperty",property:"rarity"})},{prop:"pattern",name:t("filter_pattern"),type:"multi-select",options:i(o,{type:"fromNestedSingleProperty",property:"pattern"})},{prop:"style",name:t("filter_finish_style"),type:"multi-select",options:i(o,{type:"fromNestedSingleProperty",property:"style"})},{prop:"team",name:t("filter_team"),type:"multi-select",options:i(o,{type:"fromNestedSingleProperty",property:"team"})},{prop:"weapon",name:t("filter_weapon"),type:"multi-select",options:i(o,{type:"fromNestedSingleProperty",property:"weapon"})},{prop:"wear",name:t("filter_wear"),type:"multi-select",options:i(o,{type:"fromNestedSingleProperty",property:"wear"})},{prop:"category",name:t("filter_category"),type:"multi-select",options:i(o,{type:"fromNestedSingleProperty",property:"category"})},{prop:"paint_index",name:t("filter_paint_index"),type:"multi-select",options:i(o,{type:"fromProperty",property:"paint_index"})},{prop:"souvenir",name:t("filter_souvenir"),type:"multi-select",options:[{id:"true",name:t("common_yes")},{id:"false",name:t("common_no")}]},{prop:"stattrak",name:t("filter_stattrak"),type:"multi-select",options:[{id:"true",name:t("common_yes")},{id:"false",name:t("common_no")}]}];return{items:F(o,p,e),filters:f}}}const B={class:"flex flex-row flex-1"},D=V({__name:"SkinsView",setup(y){const p=x(),e=v({query:new b().query})("skins")(),n=N(!1);function o(){p.deleteItem(),n.value=!0}function f(l){n.value=!1,p.getItemDetails(l)}function u({prop:l,value:r}){e.setFilters({prop:l,value:r}),e.fetch()}function m(){e.removeFilters(),e.fetch()}function _({prop:l,value:r}){const d=(e.filtersValues[l]??[]).filter(g=>g!==r);e.setFilters({prop:l,value:d}),e.fetch()}return S("Skins - Counter-Strike items"),(l,r)=>(c(),P("div",B,[C(k,{items:s(e).items,"items-count":s(e).itemsCount,loading:s(e).loading,search:s(e).search,"has-filters":s(e).filters.length>0,"has-selected-filters":Object.keys(s(e).filtersValues).length>0,filters:s(e).filters,"filters-values":s(e).filtersValues,onSetQuery:r[0]||(r[0]=a=>s(e).setSearch(a)),onSelect:f,onLoadMore:r[1]||(r[1]=a=>s(e).loadMore()),onOpenFilters:r[2]||(r[2]=a=>o()),onRemoveFilter:_},null,8,["items","items-count","loading","search","has-filters","has-selected-filters","filters","filters-values"]),n.value?(c(),I($,{key:0,filters:s(e).filters,"filters-values":s(e).filtersValues,onSetFilters:u,onRemoveFilters:m,onClose:r[3]||(r[3]=a=>n.value=!1)},null,8,["filters","filters-values"])):L("",!0)]))}});export{D as default};
