import{c as _,_ as d}from"./ItemsList.vue_vue_type_script_setup_true_lang-BMQ5xRH8.js";import{g,b as v,t,e as i,f as S,d as k,u as w,r as h,h as x,i as F,a as s,c as N,j as P,o as u}from"./index-IIntSFez.js";import{_ as C}from"./FiltersPanel.vue_vue_type_script_setup_true_lang-DF1EiNgh.js";class I{async query({search:l,filters:e}){const n=g();let r=await v.get(`https://raw.githubusercontent.com/ByMykel/CSGO-API/main/public/api/${n}/skins_not_grouped.json`).then(y=>y.data.map(a=>({...a,rare:["sfui_invpanel_filter_melee","sfui_invpanel_filter_gloves"].includes(a.category.id)})));const f=[{prop:"rarity",name:t("filter_rarity"),type:"multi-select",options:i(r,{type:"fromNestedSingleProperty",property:"rarity"})},{prop:"pattern",name:t("filter_pattern"),type:"multi-select",options:i(r,{type:"fromNestedSingleProperty",property:"pattern"})},{prop:"style",name:t("filter_finish_style"),type:"multi-select",options:i(r,{type:"fromNestedSingleProperty",property:"style"})},{prop:"team",name:t("filter_team"),type:"multi-select",options:i(r,{type:"fromNestedSingleProperty",property:"team"})},{prop:"weapon",name:t("filter_weapon"),type:"multi-select",options:i(r,{type:"fromNestedSingleProperty",property:"weapon"})},{prop:"wear",name:t("filter_wear"),type:"multi-select",options:i(r,{type:"fromNestedSingleProperty",property:"wear"})},{prop:"category",name:t("filter_category"),type:"multi-select",options:i(r,{type:"fromNestedSingleProperty",property:"category"})},{prop:"paint_index",name:t("filter_paint_index"),type:"multi-select",options:i(r,{type:"fromProperty",property:"paint_index"})},{prop:"souvenir",name:t("filter_souvenir"),type:"multi-select",options:[{id:"true",name:t("common_yes")},{id:"false",name:t("common_no")}]},{prop:"stattrak",name:t("filter_stattrak"),type:"multi-select",options:[{id:"true",name:t("common_yes")},{id:"false",name:t("common_no")}]}];return{items:S(r,l,e),filters:f}}}const L={class:"flex flex-row flex-1"},b=k({__name:"SkinsView",setup(c){const l=w(),e=_({query:new I().query})("skins")(),n=h(!1);function r(){l.deleteItem(),n.value=!0}function f(p){n.value=!1,l.getItemDetails(p)}function y({prop:p,value:o}){e.setFilters({prop:p,value:o}),e.fetch()}function a(){e.removeFilters(),e.fetch()}return(p,o)=>(u(),x("div",L,[F(d,{items:s(e).items,"items-count":s(e).itemsCount,loading:s(e).loading,search:s(e).search,"has-filters":s(e).filters.length>0,onSetQuery:o[0]||(o[0]=m=>s(e).setSearch(m)),onSelect:f,onLoadMore:o[1]||(o[1]=m=>s(e).loadMore()),onOpenFilters:o[2]||(o[2]=m=>r())},null,8,["items","items-count","loading","search","has-filters"]),n.value?(u(),N(C,{key:0,filters:s(e).filters,"filters-values":s(e).filtersValues,onSetFilters:y,onRemoveFilters:a,onClose:o[3]||(o[3]=m=>n.value=!1)},null,8,["filters","filters-values"])):P("",!0)]))}});export{b as default};
