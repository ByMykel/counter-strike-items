import{c as S,_ as k}from"./ItemsList.vue_vue_type_script_setup_true_lang-Cv5aVp7Z.js";import{j as h,k as y,l as i,m as t,n as w,d as P,u as F,p as N,a as V,e as x,i as C,q as I,g as o,o as d}from"./index-CYBgRrjW.js";import{_ as $}from"./FiltersPanel.vue_vue_type_script_setup_true_lang-BRFBy53u.js";import{u as L}from"./ItemsSkeleton.vue_vue_type_script_setup_true_lang-j7m-d81D.js";class b{async query({search:c,filters:e}){const a=h();let f=await y.get(`https://raw.githubusercontent.com/ByMykel/CSGO-API/main/public/api/${a}/skins.json`).then(p=>p.data.reduce((n,l)=>(n[l.id]=l,n),{})),r=await y.get(`https://raw.githubusercontent.com/ByMykel/CSGO-API/main/public/api/${a}/skins_not_grouped.json`).then(p=>p.data.map(n=>({...n,rare:["sfui_invpanel_filter_melee","sfui_invpanel_filter_gloves"].includes(n.category.id),collections:f[n.skin_id]?.collections??[],crates:f[n.skin_id]?.crates??[]})));const u=[{prop:"crates",name:t("filter_crates"),type:"multi-select",options:i(r,{type:"fromNestedProperty",property:"crates"})},{prop:"collections",name:t("filter_collections"),type:"multi-select",options:i(r,{type:"fromNestedProperty",property:"collections"})},{prop:"rarity",name:t("filter_rarity"),type:"multi-select",options:i(r,{type:"fromNestedSingleProperty",property:"rarity"})},{prop:"pattern",name:t("filter_pattern"),type:"multi-select",options:i(r,{type:"fromNestedSingleProperty",property:"pattern"})},{prop:"style",name:t("filter_finish_style"),type:"multi-select",options:i(r,{type:"fromNestedSingleProperty",property:"style"})},{prop:"weapon",name:t("filter_weapon"),type:"multi-select",options:i(r,{type:"fromNestedSingleProperty",property:"weapon"})},{prop:"wear",name:t("filter_wear"),type:"multi-select",options:i(r,{type:"fromNestedSingleProperty",property:"wear"})},{prop:"category",name:t("filter_category"),type:"multi-select",options:i(r,{type:"fromNestedSingleProperty",property:"category"})},{prop:"paint_index",name:t("filter_paint_index"),type:"multi-select",options:i(r,{type:"fromProperty",property:"paint_index"})},{prop:"souvenir",name:t("filter_souvenir"),type:"multi-select",options:[{id:"true",name:t("common_yes")},{id:"false",name:t("common_no")}]},{prop:"phase",name:t("filter_phase"),type:"multi-select",options:i(r,{type:"fromProperty",property:"phase"})},{prop:"stattrak",name:t("filter_stattrak"),type:"multi-select",options:[{id:"true",name:t("common_yes")},{id:"false",name:t("common_no")}]},{prop:"team",name:t("filter_team"),type:"multi-select",options:i(r,{type:"fromNestedSingleProperty",property:"team"})},{prop:"legacy_model",name:t("filter_legacy_model"),type:"multi-select",options:[{id:"true",name:t("common_yes")},{id:"false",name:t("common_no")}]}];return{items:w(r,c,e),filters:u}}}const B={class:"flex flex-row flex-1"},D=P({__name:"SkinsView",setup(_){const c=F(),e=S({query:new b().query})("skins")(),a=N(!1);function f(){c.deleteItem(),a.value=!0}function r(l){a.value=!1,c.getItemDetails(l)}function u({prop:l,value:s}){e.setFilters({prop:l,value:s}),e.fetch()}function p(){e.removeFilters(),e.fetch()}function n({prop:l,value:s}){const g=(e.filtersValues[l]??[]).filter(v=>v!==s);e.setFilters({prop:l,value:g}),e.fetch()}return L("Skins - Counter-Strike items"),(l,s)=>(d(),V("div",B,[x(k,{items:o(e).items,"items-count":o(e).itemsCount,loading:o(e).loading,search:o(e).search,"has-filters":o(e).filters.length>0,"has-selected-filters":Object.keys(o(e).filtersValues).length>0,filters:o(e).filters,"filters-values":o(e).filtersValues,onSetQuery:s[0]||(s[0]=m=>o(e).setSearch(m)),onSelect:r,onLoadMore:s[1]||(s[1]=m=>o(e).loadMore()),onOpenFilters:s[2]||(s[2]=m=>f()),onRemoveFilter:n},null,8,["items","items-count","loading","search","has-filters","has-selected-filters","filters","filters-values"]),a.value?(d(),C($,{key:0,filters:o(e).filters,"filters-values":o(e).filtersValues,onSetFilters:u,onRemoveFilters:p,onClose:s[3]||(s[3]=m=>a.value=!1)},null,8,["filters","filters-values"])):I("",!0)]))}});export{D as default};
