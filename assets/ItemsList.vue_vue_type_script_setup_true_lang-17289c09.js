import{o as c,e as f,h as v,l as V,r as g,m as M,p as O,q as ee,s as te,v as q,w as se,x as U,y as oe,z as le,A as ne,B as re,C as ae,D as ie,E as ue,d as I,f as z,a as F,j as ce,t as R,g as S,G as X,I as de,J as fe,n as J,K as me,i as Q,F as Y,c as W,L as pe}from"./index-e9363d20.js";function ve(a,l){return c(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z"})])}function he(a,l){return c(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})])}function ge(a){var l;const t=q(a);return(l=t==null?void 0:t.$el)!=null?l:t}const Z=se?window:void 0;function K(...a){let l,t,o,e;if(typeof a[0]=="string"||Array.isArray(a[0])?([t,o,e]=a,l=Z):[l,t,o,e]=a,!l)return V;Array.isArray(t)||(t=[t]),Array.isArray(o)||(o=[o]);const d=[],s=()=>{d.forEach(m=>m()),d.length=0},p=(m,h,w,k)=>(m.addEventListener(h,w,k),()=>m.removeEventListener(h,w,k)),n=U(()=>[ge(l),q(e)],([m,h])=>{s(),m&&d.push(...t.flatMap(w=>o.map(k=>p(m,w,k,h))))},{immediate:!0,flush:"post"}),u=()=>{n(),s()};return oe(u),u}const G=1;function be(a,l={}){const{throttle:t=0,idle:o=200,onStop:e=V,onScroll:d=V,offset:s={left:0,right:0,top:0,bottom:0},eventListenerOptions:p={capture:!1,passive:!0},behavior:n="auto",window:u=Z}=l,m=g(0),h=g(0),w=M({get(){return m.value},set(r){C(r,void 0)}}),k=M({get(){return h.value},set(r){C(void 0,r)}});function C(r,_){var T,D,x;if(!u)return;const A=q(a);A&&((x=A instanceof Document?u.document.body:A)==null||x.scrollTo({top:(T=q(_))!=null?T:k.value,left:(D=q(r))!=null?D:w.value,behavior:q(n)}))}const B=g(!1),b=O({left:!0,right:!1,top:!0,bottom:!1}),y=O({left:!1,right:!1,top:!1,bottom:!1}),i=r=>{B.value&&(B.value=!1,y.left=!1,y.right=!1,y.top=!1,y.bottom=!1,e(r))},$=ee(i,t+o),L=r=>{if(!u)return;const _=r===u?r.document.documentElement:r===u.document?r.documentElement:r,{display:T,flexDirection:D}=getComputedStyle(_),x=_.scrollLeft;y.left=x<m.value,y.right=x>m.value;const A=Math.abs(x)<=0+(s.left||0),H=Math.abs(x)+_.clientWidth>=_.scrollWidth-(s.right||0)-G;T==="flex"&&D==="row-reverse"?(b.left=H,b.right=A):(b.left=A,b.right=H),m.value=x;let E=_.scrollTop;r===u.document&&!E&&(E=u.document.body.scrollTop),y.top=E<h.value,y.bottom=E>h.value;const j=Math.abs(E)<=0+(s.top||0),N=Math.abs(E)+_.clientHeight>=_.scrollHeight-(s.bottom||0)-G;T==="flex"&&D==="column-reverse"?(b.top=N,b.bottom=j):(b.top=j,b.bottom=N),h.value=E},P=r=>{if(!u)return;const _=r.target===u.document?r.target.documentElement:r.target;L(_),B.value=!0,$(r),d(r)};return K(a,"scroll",t?te(P,t,!0,!1):P,p),K(a,"scrollend",i,p),{x:w,y:k,isScrolling:B,arrivedState:b,directions:y,measure(){const r=q(a);u&&r&&L(r)}}}const Oe=({query:a})=>l=>le(`list/${l}`,()=>{const t=ne(),o=re(),e=g(!1),d=g(""),s=g(1),p=g([]),n=g([]),u=g(0),m=g([]),h=g({});async function w(){b(),e.value=!0,s.value=1;try{const{items:i,filters:$}=await a({search:d.value,filters:h.value});p.value=i,u.value=p.value.length,n.value=p.value.slice((s.value-1)*20,s.value*20),m.value=$??[]}catch(i){console.error(i instanceof Error?i.message:"An unknown error occurred")}finally{e.value=!1}}async function k(){s.value+=1,n.value.push(...p.value.slice((s.value-1)*20,s.value*20))}function C(i){b(),d.value=i,w(),y(i)}function B({prop:i,value:$}){$.length===0?delete h.value[i]:h.value[i]=$}function b(){n.value=[],p.value=[],u.value=0}function y(i){o.push({query:i.length?{q:i}:{}})}return ae(()=>{const i=typeof t.query.q=="string"&&t.query.q?t.query.q:d.value;C(i)}),ie(()=>{var i,$;($=(i=ue())==null?void 0:i._s)==null||$.forEach(L=>{L.$id===`list/${l}`&&L.$dispose()})}),{items:n,itemsCount:u,search:d,loading:e,filters:m,filtersValues:h,fetch:w,loadMore:k,setSearch:C,setFilters:B}}),ye={class:"relative"},_e={class:"absolute left-0 flex items-center h-full px-2"},we={class:"absolute right-0 flex items-center h-full gap-2 px-3"},ke={key:0,class:"px-2 text-sm text-white rounded-md bg-black-200"},$e={class:"font-semibold"},Se={key:1,class:"w-20 h-6 px-2 rounded-md bg-black-200 animate-pulse"},xe={key:2,class:"w-0.5 h-[calc(100%-20px)] rounded-full bg-black-200/20"},Ee=I({__name:"SearchBar",props:{query:{},total:{},scrolledDown:{type:Boolean},hasFilters:{type:Boolean}},emits:["input","open-filters"],setup(a){const l=a,t=g(l.query||"");return U(()=>l.query,o=>{t.value=o}),(o,e)=>(c(),f("div",{class:J(["sticky top-0 left-0 right-0 z-50 px-5 pt-3 pb-2 duration-300",[o.scrolledDown?"bg-black-300 shadow-lg":"bg-transparent"]])},[v("div",ye,[v("div",_e,[z(F(he),{class:"w-6 h-6 text-black-200"})]),v("div",we,[o.total?(c(),f("p",ke,[ce(" total "),v("span",$e,R(o.total),1)])):(c(),f("div",Se)),o.hasFilters?(c(),f("div",xe)):S("",!0),o.hasFilters?(c(),f("button",{key:3,type:"button",class:"p-1 rounded-md hover:bg-black-200",onClick:e[0]||(e[0]=d=>o.$emit("open-filters"))},[z(F(ve),{class:"w-6 h-6 text-black-100"})])):S("",!0)]),X(v("input",{"onUpdate:modelValue":e[1]||(e[1]=d=>t.value=d),class:"w-full h-full py-4 pl-12 text-white border-0 rounded-md outline-none bg-black-300 focus:outline-none sm:text-sm focus:ring-2 focus:ring-[#ff5e65] focus:border-transparent",type:"text",placeholder:"Search...",onKeyup:e[2]||(e[2]=fe(d=>o.$emit("input",t.value),["enter"]))},null,544),[[de,t.value]])])],2))}}),qe={class:"flex flex-col"},Be={key:0,class:"absolute z-10 flex gap-1 text-sm font-semibold text-white top-2 left-2"},Ae={class:"absolute z-10 flex gap-1 text-sm font-semibold text-white top-2 right-2"},Ce={key:0,class:"bg-[#ffd700] h-3 w-3 rounded-full",title:"Souvenir"},Le={key:1,class:"bg-[#cf6a32] h-3 w-3 rounded-full",title:"StatTrak"},Te={key:2,class:"bg-[#8650ac] h-3 w-3 rounded-full",title:"Rare"},De={key:3,class:"bg-[#4d7455] h-3 w-3 rounded-full",title:"Rare"},Fe=["src","alt"],Ie=["title"],Ve=I({__name:"ItemCard",props:{id:{},name:{},image:{},souvenir:{type:Boolean},stattrak:{type:Boolean},rare:{type:Boolean},genuine:{type:Boolean}},emits:["show"],setup(a){const l=a,{getPrice:t}=me(),o=M(()=>{const e=t(l.name);return(e==null?void 0:e.steam.last_7d)||(e==null?void 0:e.steam.last_24h)||(e==null?void 0:e.steam.last_30d)||(e==null?void 0:e.steam.last_90d)||null});return(e,d)=>(c(),f("div",qe,[v("button",{type:"button",class:"relative block h-[12rem] p-1 overflow-hidden border-2 border-transparent rounded-md outline-none cursor-pointer focus:border-[#ff5e65] hover:border-[#ff5e65]",onClick:d[0]||(d[0]=s=>e.$emit("show"))},[o.value?(c(),f("div",Be," $ "+R(o.value),1)):S("",!0),v("div",Ae,[e.souvenir?(c(),f("div",Ce)):S("",!0),e.stattrak?(c(),f("div",Le)):S("",!0),e.rare?(c(),f("div",Te)):S("",!0),e.genuine?(c(),f("div",De)):S("",!0)]),v("img",{class:J(["object-contain w-full h-full py-4 rounded-md bg-black-300/80 bg-[url('/img/graph-paper.svg')]",{"pb-0":e.id.includes("agent-")}]),src:e.image,alt:e.name},null,10,Fe)]),v("div",null,[v("p",{class:"text-sm truncate px-0.5 mt-1.5 text-white",title:e.name},R(e.name),9,Ie)])]))}}),Me=v("div",{class:"block rounded-md animate-pulse h-5/6 bg-black-300"},null,-1),ze=v("div",{class:"bg-black-300 rounded-md h-1/6 mt-1.5 animate-pulse"},null,-1),Re=[Me,ze],Pe=I({__name:"ItemsSkeleton",props:{numberItems:{default:30}},setup(a){return(l,t)=>(c(!0),f(Y,null,Q(l.numberItems,o=>(c(),f("div",{key:`skeleton-${o}`,class:"flex flex-col min-h-[10rem]"},Re))),128))}}),He={class:"relative flex-1 w-full"},je={key:1,class:"py-10"},We=I({__name:"ItemsList",props:{items:{},itemsCount:{},loading:{type:Boolean},search:{},hasFilters:{type:Boolean,default:!1}},emits:["set-query","select","load-more","open-filters"],setup(a,{emit:l}){const t=g(null),{y:o}=be(t),e=g(!1);function d(s){e.value=s,s===!0&&l("load-more")}return(s,p)=>(c(),f("div",He,[z(Ee,{query:s.search,"scrolled-down":F(o)>40,total:s.itemsCount,"has-filters":s.hasFilters,onInput:p[0]||(p[0]=n=>s.$emit("set-query",n)),onOpenFilters:p[1]||(p[1]=n=>s.$emit("open-filters"))},null,8,["query","scrolled-down","total","has-filters"]),v("div",{ref_key:"el",ref:t,class:"grid w-full gap-3 p-4 px-5 pb-32 mx-auto overflow-y-scroll h-dvh items-grid-small md:items-grid"},[(c(!0),f(Y,null,Q(s.items,n=>{var u;return c(),W(Ve,{id:n.id,key:n.id,name:n.name,image:n.image,souvenir:n.name.includes("Souvenir"),stattrak:n.name.includes("StatTrakâ„¢"),rare:["sfui_invpanel_filter_melee","sfui_invpanel_filter_gloves"].includes((u=n==null?void 0:n.category)==null?void 0:u.id),genuine:n.name.includes("Genuine"),onShow:m=>s.$emit("select",n.id)},null,8,["id","name","image","souvenir","stattrak","rare","genuine","onShow"])}),128)),s.loading?(c(),W(Pe,{key:0})):S("",!0),s.loading?S("",!0):X((c(),f("div",je,null,512)),[[F(pe),d]])],512)]))}});export{We as _,Oe as c};
