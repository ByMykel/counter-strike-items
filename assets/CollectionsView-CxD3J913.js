import{c as y,_ as v}from"./ItemsList.vue_vue_type_script_setup_true_lang-aqJz9VvL.js";import{g,b as S,t as f,e as m,f as _,d as F,u as h,r as C,h as w,i as x,a as s,c as I,j as L,o as u}from"./index-Uoo_TJ0E.js";import{_ as $}from"./FiltersPanel.vue_vue_type_script_setup_true_lang-ApP8hZGD.js";class k{async query({search:l,filters:e}){const o=g();let r=await S.get(`https://raw.githubusercontent.com/ByMykel/CSGO-API/main/public/api/${o}/collections.json`).then(c=>c.data);const a=[{prop:"crates",name:f("filter_crate"),type:"multi-select",options:m(r,{type:"fromNestedProperty",property:"crates"})},{prop:"contains",name:f("filter_contains"),type:"multi-select",options:m(r,{type:"fromNestedProperty",property:"contains"})}];return{items:_(r,l,e),filters:a}}}const B={class:"flex flex-row flex-1"},q=F({__name:"CollectionsView",setup(p){const l=h(),e=y({query:new k().query})("collections")(),o=C(!1);function r(){l.deleteItem(),o.value=!0}function a(i){o.value=!1,l.getItemDetails(i)}function c({prop:i,value:t}){e.setFilters({prop:i,value:t}),e.fetch()}function d(){e.removeFilters(),e.fetch()}return(i,t)=>(u(),w("div",B,[x(v,{items:s(e).items,"items-count":s(e).itemsCount,loading:s(e).loading,search:s(e).search,"has-filters":s(e).filters.length>0,onSetQuery:t[0]||(t[0]=n=>s(e).setSearch(n)),onSelect:a,onLoadMore:t[1]||(t[1]=n=>s(e).loadMore()),onOpenFilters:t[2]||(t[2]=n=>r())},null,8,["items","items-count","loading","search","has-filters"]),o.value?(u(),I($,{key:0,filters:s(e).filters,"filters-values":s(e).filtersValues,onSetFilters:c,onRemoveFilters:d,onClose:t[3]||(t[3]=n=>o.value=!1)},null,8,["filters","filters-values"])):L("",!0)]))}});export{q as default};
