import{c as S,u as k,_ as h}from"./useTitle-C9L5aDP7.js";import{g as w,b as y,e as l,t,f as F,d as P,u as N,r as V,h as x,i as C,c as I,j as $,a as o,o as d}from"./index-DFWi2fPv.js";import{_ as b}from"./FiltersPanel.vue_vue_type_script_setup_true_lang-Bn6_eqtQ.js";class L{async query({search:c,filters:e}){const a=w();let f=await y.get(`https://raw.githubusercontent.com/ByMykel/CSGO-API/main/public/api/${a}/skins.json`).then(p=>p.data.reduce((n,i)=>(n[i.id]=i,n),{})),r=await y.get(`https://raw.githubusercontent.com/ByMykel/CSGO-API/main/public/api/${a}/skins_not_grouped.json`).then(p=>p.data.map(n=>({...n,rare:["sfui_invpanel_filter_melee","sfui_invpanel_filter_gloves"].includes(n.category.id),collections:f[n.skin_id]?.collections??[],crates:f[n.skin_id]?.crates??[]})));const u=[{prop:"crates",name:t("filter_crates"),type:"multi-select",options:l(r,{type:"fromNestedProperty",property:"crates"})},{prop:"collections",name:t("filter_collections"),type:"multi-select",options:l(r,{type:"fromNestedProperty",property:"collections"})},{prop:"rarity",name:t("filter_rarity"),type:"multi-select",options:l(r,{type:"fromNestedSingleProperty",property:"rarity"})},{prop:"pattern",name:t("filter_pattern"),type:"multi-select",options:l(r,{type:"fromNestedSingleProperty",property:"pattern"})},{prop:"style",name:t("filter_finish_style"),type:"multi-select",options:l(r,{type:"fromNestedSingleProperty",property:"style"})},{prop:"weapon",name:t("filter_weapon"),type:"multi-select",options:l(r,{type:"fromNestedSingleProperty",property:"weapon"})},{prop:"wear",name:t("filter_wear"),type:"multi-select",options:l(r,{type:"fromNestedSingleProperty",property:"wear"})},{prop:"category",name:t("filter_category"),type:"multi-select",options:l(r,{type:"fromNestedSingleProperty",property:"category"})},{prop:"paint_index",name:t("filter_paint_index"),type:"multi-select",options:l(r,{type:"fromProperty",property:"paint_index"})},{prop:"souvenir",name:t("filter_souvenir"),type:"multi-select",options:[{id:"true",name:t("common_yes")},{id:"false",name:t("common_no")}]},{prop:"stattrak",name:t("filter_stattrak"),type:"multi-select",options:[{id:"true",name:t("common_yes")},{id:"false",name:t("common_no")}]},{prop:"team",name:t("filter_team"),type:"multi-select",options:l(r,{type:"fromNestedSingleProperty",property:"team"})},{prop:"legacy_model",name:t("filter_legacy_model"),type:"multi-select",options:[{id:"true",name:t("common_yes")},{id:"false",name:t("common_no")}]}];return{items:F(r,c,e),filters:u}}}const B={class:"flex flex-row flex-1"},q=P({__name:"SkinsView",setup(_){const c=N(),e=S({query:new L().query})("skins")(),a=V(!1);function f(){c.deleteItem(),a.value=!0}function r(i){a.value=!1,c.getItemDetails(i)}function u({prop:i,value:s}){e.setFilters({prop:i,value:s}),e.fetch()}function p(){e.removeFilters(),e.fetch()}function n({prop:i,value:s}){const g=(e.filtersValues[i]??[]).filter(v=>v!==s);e.setFilters({prop:i,value:g}),e.fetch()}return k("Skins - Counter-Strike items"),(i,s)=>(d(),x("div",B,[C(h,{items:o(e).items,"items-count":o(e).itemsCount,loading:o(e).loading,search:o(e).search,"has-filters":o(e).filters.length>0,"has-selected-filters":Object.keys(o(e).filtersValues).length>0,filters:o(e).filters,"filters-values":o(e).filtersValues,onSetQuery:s[0]||(s[0]=m=>o(e).setSearch(m)),onSelect:r,onLoadMore:s[1]||(s[1]=m=>o(e).loadMore()),onOpenFilters:s[2]||(s[2]=m=>f()),onRemoveFilter:n},null,8,["items","items-count","loading","search","has-filters","has-selected-filters","filters","filters-values"]),a.value?(d(),I(b,{key:0,filters:o(e).filters,"filters-values":o(e).filtersValues,onSetFilters:u,onRemoveFilters:p,onClose:s[3]||(s[3]=m=>a.value=!1)},null,8,["filters","filters-values"])):$("",!0)]))}});export{q as default};
